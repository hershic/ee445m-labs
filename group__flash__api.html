<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>EE445M Real Time Operating Systems: Flash_api</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">EE445M Real Time Operating Systems
   
   </div>
   <div id="projectbrief">Taken at the University of Texas Spring 2015</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__flash__api.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Flash_api</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga7c07699981eca56d83bc5a7d11e13848">FlashErase</a> (uint32_t ui32Address)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga12d41b1adc1919998b7c446663af663a">FlashProgram</a> (uint32_t *pui32Data, uint32_t ui32Address, uint32_t ui32Count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69">tFlashProtection</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga86d899fb5ae2c044eeaa025c254375fa">FlashProtectGet</a> (uint32_t ui32Address)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga3dca804ebcefe3819eb4178efa4ac294">FlashProtectSet</a> (uint32_t ui32Address, <a class="el" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69">tFlashProtection</a> eProtect)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gad67df27554b4d45e10cf2ea5ce58bccf">FlashProtectSave</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga78a8e8c1032a58ce2cc79954b26c274e">FlashUserGet</a> (uint32_t *pui32User0, uint32_t *pui32User1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga105d8abeae98272161e563f146f13075">FlashUserSet</a> (uint32_t ui32User0, uint32_t ui32User1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga8e168d8745037e9b2554100f433509de">FlashUserSave</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gadc9618455a71ab80e02dd0139a30767b">FlashIntRegister</a> (void(*pfnHandler)(void))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gaeeef7616c7db14cc8f1b21de1a777e10">FlashIntUnregister</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gabe5777e193e6335c845c5dc06813874e">FlashIntEnable</a> (uint32_t ui32IntFlags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gae6f4d44ace218739be6d9e94ba7543cf">FlashIntDisable</a> (uint32_t ui32IntFlags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#gacddc4964bed58c1c14358c5b4e3a5fa4">FlashIntStatus</a> (bool bMasked)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga2dcee673e2dad8d5a8a2bbb4e3553be6">FlashIntClear</a> (uint32_t ui32IntFlags)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga23a5a76ad44537438c85b6fdd5eb6bd4">g_pui32FMPPERegs</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__api.html#ga0cae6c69611a5f796fb7a35edef7cea1">g_pui32FMPRERegs</a> []</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga7c07699981eca56d83bc5a7d11e13848"></a><!-- doxytag: member="flash.c::FlashErase" ref="ga7c07699981eca56d83bc5a7d11e13848" args="(uint32_t ui32Address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="group__flash__api.html#ga7c07699981eca56d83bc5a7d11e13848">FlashErase</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Erases a block of flash.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Address</td><td>is the start address of the flash block to be erased.</td></tr>
  </table>
  </dd>
</dl>
<p>This function erases a block of the on-chip flash. After erasing, the block is filled with 0xFF bytes. Read-only and execute-only blocks cannot be erased.</p>
<p>The flash block size is device-class dependent. All TM4C123x devices use 1-KB blocks but TM4C129x devices use 16-KB blocks. Please consult the device datasheet to determine the block size in use.</p>
<p>This function does not return until the block has been erased.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, or -1 if an invalid block address was specified or the block is write-protected. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00130">130</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="debug_8h_source.html#l00067">ASSERT</a>, <a class="el" href="hw__flash_8h_source.html#l00623">FLASH_ERASE_SIZE</a>, <a class="el" href="hw__flash_8h_source.html#l00054">FLASH_FCMISC</a>, <a class="el" href="hw__flash_8h_source.html#l00213">FLASH_FCMISC_AMISC</a>, <a class="el" href="hw__flash_8h_source.html#l00203">FLASH_FCMISC_ERMISC</a>, <a class="el" href="hw__flash_8h_source.html#l00207">FLASH_FCMISC_VOLTMISC</a>, <a class="el" href="hw__flash_8h_source.html#l00051">FLASH_FCRIS</a>, <a class="el" href="hw__flash_8h_source.html#l00181">FLASH_FCRIS_ARIS</a>, <a class="el" href="hw__flash_8h_source.html#l00173">FLASH_FCRIS_ERRIS</a>, <a class="el" href="hw__flash_8h_source.html#l00177">FLASH_FCRIS_VOLTRIS</a>, <a class="el" href="hw__flash_8h_source.html#l00048">FLASH_FMA</a>, <a class="el" href="hw__flash_8h_source.html#l00050">FLASH_FMC</a>, <a class="el" href="hw__flash_8h_source.html#l00163">FLASH_FMC_ERASE</a>, <a class="el" href="hw__flash_8h_source.html#l00160">FLASH_FMC_WRKEY</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Check the arguments.</span>
    <span class="comment">//</span>
    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>(!(ui32Address &amp; (<a class="code" href="hw__flash_8h.html#a7407d0bb0053b539b8144477b446978a">FLASH_ERASE_SIZE</a> - 1)));

    <span class="comment">//</span>
    <span class="comment">// Clear the flash access and error interrupts.</span>
    <span class="comment">//</span>
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a452957750decad802205504cd6760b28">FLASH_FCMISC</a>) = (<a class="code" href="hw__flash_8h.html#ad93ec424487167f9ff9e603c5b7bbea3">FLASH_FCMISC_AMISC</a> | <a class="code" href="hw__flash_8h.html#a221dab551cd1c8c2c20b52597d3490ae">FLASH_FCMISC_VOLTMISC</a> |
                           <a class="code" href="hw__flash_8h.html#a5971da07bbccd52896cffe0cf9d00c42">FLASH_FCMISC_ERMISC</a>);

    <span class="comment">//</span>
    <span class="comment">// Erase the block.</span>
    <span class="comment">//</span>
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#acec37e62cb88a0d40af83c466d03151f">FLASH_FMA</a>) = ui32Address;
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a89c6418eced607811aec6c584f004215">FLASH_FMC</a>) = <a class="code" href="hw__flash_8h.html#ad459e0bf007541fd064f4a6f85651ede">FLASH_FMC_WRKEY</a> | <a class="code" href="hw__flash_8h.html#a4467d81c06e58e0058ba9bd7ce9a1fa8">FLASH_FMC_ERASE</a>;

    <span class="comment">//</span>
    <span class="comment">// Wait until the block has been erased.</span>
    <span class="comment">//</span>
    <span class="keywordflow">while</span>(<a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a89c6418eced607811aec6c584f004215">FLASH_FMC</a>) &amp; <a class="code" href="hw__flash_8h.html#a4467d81c06e58e0058ba9bd7ce9a1fa8">FLASH_FMC_ERASE</a>)
    {
    }

    <span class="comment">//</span>
    <span class="comment">// Return an error if an access violation or erase error occurred.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span>(<a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#ac03d9a7d333a980b958c3d0a4ebdb5f2">FLASH_FCRIS</a>) &amp; (<a class="code" href="hw__flash_8h.html#a09d50b5c6779f705a495c165914d1bd1">FLASH_FCRIS_ARIS</a> | <a class="code" href="hw__flash_8h.html#a5d083252492ed45f95e8d7fc351319ad">FLASH_FCRIS_VOLTRIS</a> |
                             <a class="code" href="hw__flash_8h.html#a0ed8621b4617b19532f18e0e4b63a19f">FLASH_FCRIS_ERRIS</a>))
    {
        <span class="keywordflow">return</span>(-1);
    }

    <span class="comment">//</span>
    <span class="comment">// Success.</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span>(0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga2dcee673e2dad8d5a8a2bbb4e3553be6"></a><!-- doxytag: member="flash.c::FlashIntClear" ref="ga2dcee673e2dad8d5a8a2bbb4e3553be6" args="(uint32_t ui32IntFlags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__flash__api.html#ga2dcee673e2dad8d5a8a2bbb4e3553be6">FlashIntClear</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32IntFlags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears flash controller interrupt sources.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32IntFlags</td><td>is the bit mask of the interrupt sources to be cleared.</td></tr>
  </table>
  </dd>
</dl>
<p>The specified flash controller interrupt sources are cleared, so that they no longer assert. The ui32IntFlags parameter can be the logical OR of any of the following values:</p>
<ul>
<li><b>FLASH_INT_ACCESS</b> occurs when a program or erase action was attempted on a block of flash that is marked as read-only or execute-only.</li>
<li><b>FLASH_INT_PROGRAM</b> occurs when a programming or erase cycle completes.</li>
<li><b>FLASH_INT_EEPROM</b> occurs when an EEPROM interrupt occurs. The source of the EEPROM interrupt can be determined by reading the EEDONE register.</li>
<li><b>FLASH_INT_VOLTAGE_ERR</b> occurs when the voltage was out of spec during the flash operation and the operation was terminated.</li>
<li><b>FLASH_INT_DATA_ERR</b> occurs when an operation attempts to program a bit that contains a 0 to a 1.</li>
<li><b>FLASH_INT_ERASE_ERR</b> occurs when an erase operation fails.</li>
<li><b>FLASH_INT_PROGRAM_ERR</b> occurs when a program operation fails.</li>
</ul>
<p>This function must be called in the interrupt handler to keep the interrupt from being triggered again immediately upon exit.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Because there is a write buffer in the Cortex-M processor, it may take several clock cycles before the interrupt source is actually cleared. Therefore, it is recommended that the interrupt source be cleared early in the interrupt handler (as opposed to the very last action) to avoid returning from the interrupt handler before the interrupt source is actually cleared. Failure to do so may result in the interrupt handler being immediately reentered (because the interrupt controller still sees the interrupt source asserted).</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00838">838</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="hw__flash_8h_source.html#l00054">FLASH_FCMISC</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Clear the flash interrupt.</span>
    <span class="comment">//</span>
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a452957750decad802205504cd6760b28">FLASH_FCMISC</a>) = ui32IntFlags;
}
</pre></div>
</div>
</div>
<a class="anchor" id="gae6f4d44ace218739be6d9e94ba7543cf"></a><!-- doxytag: member="flash.c::FlashIntDisable" ref="gae6f4d44ace218739be6d9e94ba7543cf" args="(uint32_t ui32IntFlags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__flash__api.html#gae6f4d44ace218739be6d9e94ba7543cf">FlashIntDisable</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32IntFlags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disables individual flash controller interrupt sources.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32IntFlags</td><td>is a bit mask of the interrupt sources to be disabled. The ui32IntFlags parameter can be the logical OR of any of the following values:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li><b>FLASH_INT_ACCESS</b> occurs when a program or erase action was attempted on a block of flash that is marked as read-only or execute-only.</li>
<li><b>FLASH_INT_PROGRAM</b> occurs when a programming or erase cycle completes.</li>
<li><b>FLASH_INT_EEPROM</b> occurs when an EEPROM interrupt occurs. The source of the EEPROM interrupt can be determined by reading the EEDONE register.</li>
<li><b>FLASH_INT_VOLTAGE_ERR</b> occurs when the voltage was out of spec during the flash operation and the operation was terminated.</li>
<li><b>FLASH_INT_DATA_ERR</b> occurs when an operation attempts to program a bit that contains a 0 to a 1.</li>
<li><b>FLASH_INT_ERASE_ERR</b> occurs when an erase operation fails.</li>
<li><b>FLASH_INT_PROGRAM_ERR</b> occurs when a program operation fails.</li>
</ul>
<p>This function disables the indicated flash controller interrupt sources. Only the sources that are enabled can be reflected to the processor interrupt; disabled sources have no effect on the processor.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00757">757</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="hw__flash_8h_source.html#l00053">FLASH_FCIM</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Disable the specified interrupts.</span>
    <span class="comment">//</span>
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#ad7637004a1d9ba1cc8d8bb35a8cb1dd6">FLASH_FCIM</a>) &amp;= ~(ui32IntFlags);
}
</pre></div>
</div>
</div>
<a class="anchor" id="gabe5777e193e6335c845c5dc06813874e"></a><!-- doxytag: member="flash.c::FlashIntEnable" ref="gabe5777e193e6335c845c5dc06813874e" args="(uint32_t ui32IntFlags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__flash__api.html#gabe5777e193e6335c845c5dc06813874e">FlashIntEnable</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32IntFlags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enables individual flash controller interrupt sources.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32IntFlags</td><td>is a bit mask of the interrupt sources to be enabled. The ui32IntFlags parameter can be the logical OR of any of the following values:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li><b>FLASH_INT_ACCESS</b> occurs when a program or erase action was attempted on a block of flash that is marked as read-only or execute-only.</li>
<li><b>FLASH_INT_PROGRAM</b> occurs when a programming or erase cycle completes.</li>
<li><b>FLASH_INT_EEPROM</b> occurs when an EEPROM interrupt occurs. The source of the EEPROM interrupt can be determined by reading the EEDONE register.</li>
<li><b>FLASH_INT_VOLTAGE_ERR</b> occurs when the voltage was out of spec during the flash operation and the operation was terminated.</li>
<li><b>FLASH_INT_DATA_ERR</b> occurs when an operation attempts to program a bit that contains a 0 to a 1.</li>
<li><b>FLASH_INT_ERASE_ERR</b> occurs when an erase operation fails.</li>
<li><b>FLASH_INT_PROGRAM_ERR</b> occurs when a program operation fails.</li>
</ul>
<p>This function enables the indicated flash controller interrupt sources. Only the sources that are enabled can be reflected to the processor interrupt; disabled sources have no effect on the processor.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00721">721</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="hw__flash_8h_source.html#l00053">FLASH_FCIM</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Enable the specified interrupts.</span>
    <span class="comment">//</span>
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#ad7637004a1d9ba1cc8d8bb35a8cb1dd6">FLASH_FCIM</a>) |= ui32IntFlags;
}
</pre></div>
</div>
</div>
<a class="anchor" id="gadc9618455a71ab80e02dd0139a30767b"></a><!-- doxytag: member="flash.c::FlashIntRegister" ref="gadc9618455a71ab80e02dd0139a30767b" args="(void(*pfnHandler)(void))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__flash__api.html#gadc9618455a71ab80e02dd0139a30767b">FlashIntRegister</a> </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>pfnHandler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Registers an interrupt handler for the flash interrupt.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pfnHandler</td><td>is a pointer to the function to be called when the flash interrupt occurs.</td></tr>
  </table>
  </dd>
</dl>
<p>This function sets the handler to be called when the flash interrupt occurs. The flash controller can generate an interrupt when an invalid flash access occurs, such as trying to program or erase a read-only block, or trying to read from an execute-only block. It can also generate an interrupt when a program or erase operation has completed. The interrupt is automatically enabled when the handler is registered.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__interrupt__api.html#ga0a32aafea7f4904d2a64ee18b45f96c9">IntRegister()</a> for important information about registering interrupt handlers.</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00652">652</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="hw__ints_8h_source.html#l00093">INT_FLASH_TM4C123</a>, <a class="el" href="interrupt_8c_source.html#l00610">IntEnable()</a>, and <a class="el" href="interrupt_8c_source.html#l00309">IntRegister()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Register the interrupt handler, returning an error if an error occurs.</span>
    <span class="comment">//</span>
    <a class="code" href="group__interrupt__api.html#ga0a32aafea7f4904d2a64ee18b45f96c9">IntRegister</a>(<a class="code" href="hw__ints_8h.html#a20d4c8716dcc7aed0bc420145e9884ae">INT_FLASH_TM4C123</a>, pfnHandler);

    <span class="comment">//</span>
    <span class="comment">// Enable the flash interrupt.</span>
    <span class="comment">//</span>
    <a class="code" href="group__interrupt__api.html#ga49fc9c3d1a0f8c42a20249f8c5d360ce">IntEnable</a>(<a class="code" href="hw__ints_8h.html#a20d4c8716dcc7aed0bc420145e9884ae">INT_FLASH_TM4C123</a>);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__flash__api_gadc9618455a71ab80e02dd0139a30767b_cgraph.png" border="0" usemap="#group__flash__api_gadc9618455a71ab80e02dd0139a30767b_cgraph" alt=""/></div>
<map name="group__flash__api_gadc9618455a71ab80e02dd0139a30767b_cgraph" id="group__flash__api_gadc9618455a71ab80e02dd0139a30767b_cgraph">
<area shape="rect" id="node3" href="group__interrupt__api.html#ga49fc9c3d1a0f8c42a20249f8c5d360ce" title="IntEnable" alt="" coords="179,5,256,35"/><area shape="rect" id="node5" href="group__interrupt__api.html#ga0a32aafea7f4904d2a64ee18b45f96c9" title="IntRegister" alt="" coords="175,59,260,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gacddc4964bed58c1c14358c5b4e3a5fa4"></a><!-- doxytag: member="flash.c::FlashIntStatus" ref="gacddc4964bed58c1c14358c5b4e3a5fa4" args="(bool bMasked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="group__flash__api.html#gacddc4964bed58c1c14358c5b4e3a5fa4">FlashIntStatus</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bMasked</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets the current interrupt status.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">bMasked</td><td>is false if the raw interrupt status is required and true if the masked interrupt status is required.</td></tr>
  </table>
  </dd>
</dl>
<p>This function returns the interrupt status for the flash controller. Either the raw interrupt status or the status of interrupts that are allowed to reflect to the processor can be returned.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The current interrupt status, enumerated as a bit field of <b>FLASH_INT_ACCESS</b>, <b>FLASH_INT_PROGRAM</b>, <b>FLASH_INT_EEPROM</b>, FLASH_INT_VOLTAGE_ERR, FLASH_INT_DATA_ERR, FLASH_INT_ERASE_ERR, and FLASH_INT_PROGRAM_ERR. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00783">783</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="hw__flash_8h_source.html#l00054">FLASH_FCMISC</a>, <a class="el" href="hw__flash_8h_source.html#l00051">FLASH_FCRIS</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Return either the interrupt status or the raw interrupt status as</span>
    <span class="comment">// requested.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span>(bMasked)
    {
        <span class="keywordflow">return</span>(<a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a452957750decad802205504cd6760b28">FLASH_FCMISC</a>));
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">return</span>(<a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#ac03d9a7d333a980b958c3d0a4ebdb5f2">FLASH_FCRIS</a>));
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="gaeeef7616c7db14cc8f1b21de1a777e10"></a><!-- doxytag: member="flash.c::FlashIntUnregister" ref="gaeeef7616c7db14cc8f1b21de1a777e10" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__flash__api.html#gaeeef7616c7db14cc8f1b21de1a777e10">FlashIntUnregister</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unregisters the interrupt handler for the flash interrupt.</p>
<p>This function clears the handler to be called when the flash interrupt occurs. This function also masks off the interrupt in the interrupt controller so that the interrupt handler is no longer called.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__interrupt__api.html#ga0a32aafea7f4904d2a64ee18b45f96c9">IntRegister()</a> for important information about registering interrupt handlers.</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00680">680</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="hw__ints_8h_source.html#l00093">INT_FLASH_TM4C123</a>, <a class="el" href="interrupt_8c_source.html#l00684">IntDisable()</a>, and <a class="el" href="interrupt_8c_source.html#l00381">IntUnregister()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Disable the interrupt.</span>
    <span class="comment">//</span>
    <a class="code" href="group__interrupt__api.html#ga9af6b00884dc44e92b3d05ff821b5334">IntDisable</a>(<a class="code" href="hw__ints_8h.html#a20d4c8716dcc7aed0bc420145e9884ae">INT_FLASH_TM4C123</a>);

    <span class="comment">//</span>
    <span class="comment">// Unregister the interrupt handler.</span>
    <span class="comment">//</span>
    <a class="code" href="group__interrupt__api.html#ga5dffc81c27c005f83e9bfc30f775982a">IntUnregister</a>(<a class="code" href="hw__ints_8h.html#a20d4c8716dcc7aed0bc420145e9884ae">INT_FLASH_TM4C123</a>);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__flash__api_gaeeef7616c7db14cc8f1b21de1a777e10_cgraph.png" border="0" usemap="#group__flash__api_gaeeef7616c7db14cc8f1b21de1a777e10_cgraph" alt=""/></div>
<map name="group__flash__api_gaeeef7616c7db14cc8f1b21de1a777e10_cgraph" id="group__flash__api_gaeeef7616c7db14cc8f1b21de1a777e10_cgraph">
<area shape="rect" id="node3" href="group__interrupt__api.html#ga9af6b00884dc44e92b3d05ff821b5334" title="IntDisable" alt="" coords="193,5,273,35"/><area shape="rect" id="node5" href="group__interrupt__api.html#ga5dffc81c27c005f83e9bfc30f775982a" title="IntUnregister" alt="" coords="185,59,281,88"/><area shape="rect" id="node7" href="group__interrupt__api.html#gaef37c406caeeb884ba343265b953120d" title="_IntDefaultHandler" alt="" coords="331,59,461,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga12d41b1adc1919998b7c446663af663a"></a><!-- doxytag: member="flash.c::FlashProgram" ref="ga12d41b1adc1919998b7c446663af663a" args="(uint32_t *pui32Data, uint32_t ui32Address, uint32_t ui32Count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="group__flash__api.html#ga12d41b1adc1919998b7c446663af663a">FlashProgram</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pui32Data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Programs flash.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pui32Data</td><td>is a pointer to the data to be programmed. </td></tr>
    <tr><td class="paramname">ui32Address</td><td>is the starting address in flash to be programmed. Must be a multiple of four. </td></tr>
    <tr><td class="paramname">ui32Count</td><td>is the number of bytes to be programmed. Must be a multiple of four.</td></tr>
  </table>
  </dd>
</dl>
<p>This function programs a sequence of words into the on-chip flash. Because the flash is programmed one word at a time, the starting address and byte count must both be multiples of four. It is up to the caller to verify the programmed contents, if such verification is required.</p>
<p>This function does not return until the data has been programmed.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, or -1 if a programming error is encountered. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00192">192</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="debug_8h_source.html#l00067">ASSERT</a>, <a class="el" href="hw__flash_8h_source.html#l00054">FLASH_FCMISC</a>, <a class="el" href="hw__flash_8h_source.html#l00213">FLASH_FCMISC_AMISC</a>, <a class="el" href="hw__flash_8h_source.html#l00205">FLASH_FCMISC_INVDMISC</a>, <a class="el" href="hw__flash_8h_source.html#l00201">FLASH_FCMISC_PROGMISC</a>, <a class="el" href="hw__flash_8h_source.html#l00207">FLASH_FCMISC_VOLTMISC</a>, <a class="el" href="hw__flash_8h_source.html#l00051">FLASH_FCRIS</a>, <a class="el" href="hw__flash_8h_source.html#l00181">FLASH_FCRIS_ARIS</a>, <a class="el" href="hw__flash_8h_source.html#l00175">FLASH_FCRIS_INVDRIS</a>, <a class="el" href="hw__flash_8h_source.html#l00171">FLASH_FCRIS_PROGRIS</a>, <a class="el" href="hw__flash_8h_source.html#l00177">FLASH_FCRIS_VOLTRIS</a>, <a class="el" href="hw__flash_8h_source.html#l00048">FLASH_FMA</a>, <a class="el" href="hw__flash_8h_source.html#l00056">FLASH_FMC2</a>, <a class="el" href="hw__flash_8h_source.html#l00222">FLASH_FMC2_WRBUF</a>, <a class="el" href="hw__flash_8h_source.html#l00221">FLASH_FMC2_WRKEY</a>, <a class="el" href="hw__flash_8h_source.html#l00059">FLASH_FWBN</a>, <a class="el" href="hw__flash_8h_source.html#l00057">FLASH_FWBVAL</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Check the arguments.</span>
    <span class="comment">//</span>
    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>(!(ui32Address &amp; 3));
    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>(!(ui32Count &amp; 3));

    <span class="comment">//</span>
    <span class="comment">// Clear the flash access and error interrupts.</span>
    <span class="comment">//</span>
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a452957750decad802205504cd6760b28">FLASH_FCMISC</a>) = (<a class="code" href="hw__flash_8h.html#ad93ec424487167f9ff9e603c5b7bbea3">FLASH_FCMISC_AMISC</a> | <a class="code" href="hw__flash_8h.html#a221dab551cd1c8c2c20b52597d3490ae">FLASH_FCMISC_VOLTMISC</a> |
                           <a class="code" href="hw__flash_8h.html#add6b9efaed181828f6d85c2f0359895f">FLASH_FCMISC_INVDMISC</a> | <a class="code" href="hw__flash_8h.html#ac3caebbaeb5be18fda4cff44199bf928">FLASH_FCMISC_PROGMISC</a>);

    <span class="comment">//</span>
    <span class="comment">// Loop over the words to be programmed.</span>
    <span class="comment">//</span>
    <span class="keywordflow">while</span>(ui32Count)
    {
        <span class="comment">//</span>
        <span class="comment">// Set the address of this block of words.</span>
        <span class="comment">//</span>
        <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#acec37e62cb88a0d40af83c466d03151f">FLASH_FMA</a>) = ui32Address &amp; ~(0x7f);

        <span class="comment">//</span>
        <span class="comment">// Loop over the words in this 32-word block.</span>
        <span class="comment">//</span>
        <span class="keywordflow">while</span>(((ui32Address &amp; 0x7c) || (<a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a44d47ae7430f7d86209ea2af145dc8bd">FLASH_FWBVAL</a>) == 0)) &amp;&amp;
              (ui32Count != 0))
        {
            <span class="comment">//</span>
            <span class="comment">// Write this word into the write buffer.</span>
            <span class="comment">//</span>
            <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a9aa76192495a3123083fb9484ed21060">FLASH_FWBN</a> + (ui32Address &amp; 0x7c)) = *pui32Data++;
            ui32Address += 4;
            ui32Count -= 4;
        }

        <span class="comment">//</span>
        <span class="comment">// Program the contents of the write buffer into flash.</span>
        <span class="comment">//</span>
        <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#ae67ab1d1ac27281f9572824f025f84d8">FLASH_FMC2</a>) = <a class="code" href="hw__flash_8h.html#afe36cd218f8480b756c69aafb3902aba">FLASH_FMC2_WRKEY</a> | <a class="code" href="hw__flash_8h.html#a3420da5261a77ac75ff954616425cc25">FLASH_FMC2_WRBUF</a>;

        <span class="comment">//</span>
        <span class="comment">// Wait until the write buffer has been programmed.</span>
        <span class="comment">//</span>
        <span class="keywordflow">while</span>(<a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#ae67ab1d1ac27281f9572824f025f84d8">FLASH_FMC2</a>) &amp; <a class="code" href="hw__flash_8h.html#a3420da5261a77ac75ff954616425cc25">FLASH_FMC2_WRBUF</a>)
        {
        }
    }

    <span class="comment">//</span>
    <span class="comment">// Return an error if an access violation occurred.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span>(<a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#ac03d9a7d333a980b958c3d0a4ebdb5f2">FLASH_FCRIS</a>) &amp; (<a class="code" href="hw__flash_8h.html#a09d50b5c6779f705a495c165914d1bd1">FLASH_FCRIS_ARIS</a> | <a class="code" href="hw__flash_8h.html#a5d083252492ed45f95e8d7fc351319ad">FLASH_FCRIS_VOLTRIS</a> |
                             <a class="code" href="hw__flash_8h.html#aa5ee1b730a711807d68624ceeb0cfd9d">FLASH_FCRIS_INVDRIS</a> | <a class="code" href="hw__flash_8h.html#ad40d08bc39c563b2a51a41379d760dcc">FLASH_FCRIS_PROGRIS</a>))
    {
        <span class="keywordflow">return</span>(-1);
    }

    <span class="comment">//</span>
    <span class="comment">// Success.</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span>(0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga86d899fb5ae2c044eeaa025c254375fa"></a><!-- doxytag: member="flash.c::FlashProtectGet" ref="ga86d899fb5ae2c044eeaa025c254375fa" args="(uint32_t ui32Address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69">tFlashProtection</a> <a class="el" href="group__flash__api.html#ga86d899fb5ae2c044eeaa025c254375fa">FlashProtectGet</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets the protection setting for a block of flash.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Address</td><td>is the start address of the flash block to be queried.</td></tr>
  </table>
  </dd>
</dl>
<p>This function gets the current protection for the specified block of flash. Refer to the device data sheet to determine the granularity for each protection option. A block can be read/write, read-only, or execute-only. Read/write blocks can be read, executed, erased, and programmed. Read-only blocks can be read and executed. Execute-only blocks can only be executed; processor and debugger data reads are not allowed.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns the protection setting for this block. See <a class="el" href="group__flash__api.html#ga3dca804ebcefe3819eb4178efa4ac294">FlashProtectSet()</a> for possible values. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00276">276</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="debug_8h_source.html#l00067">ASSERT</a>, <a class="el" href="hw__flash_8h_source.html#l00622">FLASH_PROTECT_SIZE</a>, <a class="el" href="flash_8h_source.html#l00064">FlashExecuteOnly</a>, <a class="el" href="flash_8h_source.html#l00063">FlashReadOnly</a>, <a class="el" href="flash_8h_source.html#l00062">FlashReadWrite</a>, <a class="el" href="flash_8c_source.html#l00063">g_pui32FMPPERegs</a>, <a class="el" href="flash_8c_source.html#l00089">g_pui32FMPRERegs</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32_t ui32FMPRE, ui32FMPPE;
    uint32_t ui32Bank;

    <span class="comment">//</span>
    <span class="comment">// Check the argument.</span>
    <span class="comment">//</span>
    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>(!(ui32Address &amp; (<a class="code" href="hw__flash_8h.html#a178f3c3c39141eafece59ee5e74dae51">FLASH_PROTECT_SIZE</a> - 1)));

    <span class="comment">//</span>
    <span class="comment">// Calculate the Flash Bank from Base Address, and mask off the Bank</span>
    <span class="comment">// from ui32Address for subsequent reference.</span>
    <span class="comment">//</span>
    ui32Bank = (((ui32Address / <a class="code" href="hw__flash_8h.html#a178f3c3c39141eafece59ee5e74dae51">FLASH_PROTECT_SIZE</a>) / 32) % 4);
    ui32Address &amp;= ((<a class="code" href="hw__flash_8h.html#a178f3c3c39141eafece59ee5e74dae51">FLASH_PROTECT_SIZE</a> * 32) - 1);

    <span class="comment">//</span>
    <span class="comment">// Read the appropriate flash protection registers for the specified</span>
    <span class="comment">// flash bank.</span>
    <span class="comment">//</span>
    ui32FMPRE = <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="group__flash__api.html#ga0cae6c69611a5f796fb7a35edef7cea1">g_pui32FMPRERegs</a>[ui32Bank]);
    ui32FMPPE = <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="group__flash__api.html#ga23a5a76ad44537438c85b6fdd5eb6bd4">g_pui32FMPPERegs</a>[ui32Bank]);

    <span class="comment">//</span>
    <span class="comment">// Check the appropriate protection bits for the block of memory that</span>
    <span class="comment">// is specified by the address.</span>
    <span class="comment">//</span>
    <span class="keywordflow">switch</span>((((ui32FMPRE &gt;&gt; (ui32Address / <a class="code" href="hw__flash_8h.html#a178f3c3c39141eafece59ee5e74dae51">FLASH_PROTECT_SIZE</a>)) &amp; 0x1) &lt;&lt; 1) |
           ((ui32FMPPE &gt;&gt; (ui32Address / <a class="code" href="hw__flash_8h.html#a178f3c3c39141eafece59ee5e74dae51">FLASH_PROTECT_SIZE</a>)) &amp; 0x1))
    {
        <span class="comment">//</span>
        <span class="comment">// This block is marked as execute only (that is, it can not be erased</span>
        <span class="comment">// or programmed, and the only reads allowed are via the instruction</span>
        <span class="comment">// fetch interface).</span>
        <span class="comment">//</span>
        <span class="keywordflow">case</span> 0:
        <span class="keywordflow">case</span> 1:
        {
            <span class="keywordflow">return</span>(<a class="code" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69a89688aa46f7fbe896237cd1ae93378d6">FlashExecuteOnly</a>);
        }

        <span class="comment">//</span>
        <span class="comment">// This block is marked as read only (that is, it can not be erased or</span>
        <span class="comment">// programmed).</span>
        <span class="comment">//</span>
        <span class="keywordflow">case</span> 2:
        {
            <span class="keywordflow">return</span>(<a class="code" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69ad97d8551ef6a697d415040f23547f879">FlashReadOnly</a>);
        }

        <span class="comment">//</span>
        <span class="comment">// This block is read/write; it can be read, erased, and programmed.</span>
        <span class="comment">//</span>
        <span class="keywordflow">case</span> 3:
        <span class="keywordflow">default</span>:
        {
            <span class="keywordflow">return</span>(<a class="code" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69a5bf698d8f7f06bc2fba40bedee6267ac">FlashReadWrite</a>);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="gad67df27554b4d45e10cf2ea5ce58bccf"></a><!-- doxytag: member="flash.c::FlashProtectSave" ref="gad67df27554b4d45e10cf2ea5ce58bccf" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="group__flash__api.html#gad67df27554b4d45e10cf2ea5ce58bccf">FlashProtectSave</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Saves the flash protection settings.</p>
<p>This function makes the currently programmed flash protection settings permanent. This operation is non-reversible; a chip reset or power cycle does not change the flash protection.</p>
<p>This function does not return until the protection has been saved.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, or -1 if a hardware error is encountered. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00491">491</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="hw__flash_8h_source.html#l00048">FLASH_FMA</a>, <a class="el" href="hw__flash_8h_source.html#l00050">FLASH_FMC</a>, <a class="el" href="hw__flash_8h_source.html#l00161">FLASH_FMC_COMT</a>, <a class="el" href="hw__flash_8h_source.html#l00160">FLASH_FMC_WRKEY</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32_t ui32Temp;

    <span class="comment">//</span>
    <span class="comment">// Save the entire bank of 8 flash protection registers.</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span>(ui32Temp = 0; ui32Temp &lt; 8; ui32Temp++)
    {
        <span class="comment">//</span>
        <span class="comment">// Tell the flash controller to write the flash protection register.</span>
        <span class="comment">//</span>
        <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#acec37e62cb88a0d40af83c466d03151f">FLASH_FMA</a>) = ui32Temp;
        <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a89c6418eced607811aec6c584f004215">FLASH_FMC</a>) = <a class="code" href="hw__flash_8h.html#ad459e0bf007541fd064f4a6f85651ede">FLASH_FMC_WRKEY</a> | <a class="code" href="hw__flash_8h.html#a9c7c67a4856820820fe1843e2507774f">FLASH_FMC_COMT</a>;

        <span class="comment">//</span>
        <span class="comment">// Wait until the write has completed.</span>
        <span class="comment">//</span>
        <span class="keywordflow">while</span>(<a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a89c6418eced607811aec6c584f004215">FLASH_FMC</a>) &amp; <a class="code" href="hw__flash_8h.html#a9c7c67a4856820820fe1843e2507774f">FLASH_FMC_COMT</a>)
        {
        }
    }

    <span class="comment">//</span>
    <span class="comment">// Success.</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span>(0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga3dca804ebcefe3819eb4178efa4ac294"></a><!-- doxytag: member="flash.c::FlashProtectSet" ref="ga3dca804ebcefe3819eb4178efa4ac294" args="(uint32_t ui32Address, tFlashProtection eProtect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="group__flash__api.html#ga3dca804ebcefe3819eb4178efa4ac294">FlashProtectSet</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69">tFlashProtection</a>&#160;</td>
          <td class="paramname"><em>eProtect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the protection setting for a block of flash.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Address</td><td>is the start address of the flash block to be protected. </td></tr>
    <tr><td class="paramname">eProtect</td><td>is the protection to be applied to the block. Can be one of <b>FlashReadWrite</b>, <b>FlashReadOnly</b>, or <b>FlashExecuteOnly</b>.</td></tr>
  </table>
  </dd>
</dl>
<p>This function sets the protection for the specified block of flash. Refer to the device data sheet to determine the granularity for each protection option. Blocks that are read/write can be made read-only or execute-only. Blocks that are read-only can be made execute-only. Blocks that are execute-only cannot have their protection modified. Attempts to make the block protection less stringent (that is, read-only to read/write) result in a failure (and are prevented by the hardware).</p>
<p>Changes to the flash protection are maintained only until the next reset. This protocol allows the application to be executed in the desired flash protection environment to check for inappropriate flash access (via the flash interrupt). To make the flash protection permanent, use the <a class="el" href="group__flash__api.html#gad67df27554b4d45e10cf2ea5ce58bccf">FlashProtectSave()</a> function.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, or -1 if an invalid address or an invalid protection was specified. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00365">365</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="debug_8h_source.html#l00067">ASSERT</a>, <a class="el" href="hw__flash_8h_source.html#l00622">FLASH_PROTECT_SIZE</a>, <a class="el" href="flash_8h_source.html#l00064">FlashExecuteOnly</a>, <a class="el" href="flash_8h_source.html#l00063">FlashReadOnly</a>, <a class="el" href="flash_8h_source.html#l00062">FlashReadWrite</a>, <a class="el" href="flash_8c_source.html#l00063">g_pui32FMPPERegs</a>, <a class="el" href="flash_8c_source.html#l00089">g_pui32FMPRERegs</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32_t ui32ProtectRE, ui32ProtectPE;
    uint32_t ui32Bank;

    <span class="comment">//</span>
    <span class="comment">// Check the argument.</span>
    <span class="comment">//</span>
    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>(!(ui32Address &amp; (<a class="code" href="hw__flash_8h.html#a178f3c3c39141eafece59ee5e74dae51">FLASH_PROTECT_SIZE</a> - 1)));
    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>((eProtect == <a class="code" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69a5bf698d8f7f06bc2fba40bedee6267ac">FlashReadWrite</a>) || (eProtect == <a class="code" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69ad97d8551ef6a697d415040f23547f879">FlashReadOnly</a>) ||
           (eProtect == <a class="code" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69a89688aa46f7fbe896237cd1ae93378d6">FlashExecuteOnly</a>));

    <span class="comment">//</span>
    <span class="comment">// Convert the address into a block number.</span>
    <span class="comment">//</span>
    ui32Address /= <a class="code" href="hw__flash_8h.html#a178f3c3c39141eafece59ee5e74dae51">FLASH_PROTECT_SIZE</a>;

    <span class="comment">//</span>
    <span class="comment">// ui32Address contains a &quot;raw&quot; block number.  Derive the Flash Bank from</span>
    <span class="comment">// the &quot;raw&quot; block number, and convert ui32Address to a &quot;relative&quot;</span>
    <span class="comment">// block number.</span>
    <span class="comment">//</span>
    ui32Bank = ((ui32Address / 32) % 4);
    ui32Address %= 32;

    <span class="comment">//</span>
    <span class="comment">// Get the current protection for the specified flash bank.</span>
    <span class="comment">//</span>
    ui32ProtectRE = <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="group__flash__api.html#ga0cae6c69611a5f796fb7a35edef7cea1">g_pui32FMPRERegs</a>[ui32Bank]);
    ui32ProtectPE = <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="group__flash__api.html#ga23a5a76ad44537438c85b6fdd5eb6bd4">g_pui32FMPPERegs</a>[ui32Bank]);

    <span class="comment">//</span>
    <span class="comment">// Set the protection based on the requested protection.</span>
    <span class="comment">//</span>
    <span class="keywordflow">switch</span>(eProtect)
    {
        <span class="comment">//</span>
        <span class="comment">// Make this block execute only.</span>
        <span class="comment">//</span>
        <span class="keywordflow">case</span> <a class="code" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69a89688aa46f7fbe896237cd1ae93378d6">FlashExecuteOnly</a>:
        {
            <span class="comment">//</span>
            <span class="comment">// Turn off the read and program bits for this block.</span>
            <span class="comment">//</span>
            ui32ProtectRE &amp;= ~(0x1 &lt;&lt; ui32Address);
            ui32ProtectPE &amp;= ~(0x1 &lt;&lt; ui32Address);

            <span class="comment">//</span>
            <span class="comment">// We&#39;re done handling this protection.</span>
            <span class="comment">//</span>
            <span class="keywordflow">break</span>;
        }

        <span class="comment">//</span>
        <span class="comment">// Make this block read only.</span>
        <span class="comment">//</span>
        <span class="keywordflow">case</span> <a class="code" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69ad97d8551ef6a697d415040f23547f879">FlashReadOnly</a>:
        {
            <span class="comment">//</span>
            <span class="comment">// The block can not be made read only if it is execute only.</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span>(((ui32ProtectRE &gt;&gt; ui32Address) &amp; 0x1) != 0x1)
            {
                <span class="keywordflow">return</span>(-1);
            }

            <span class="comment">//</span>
            <span class="comment">// Make this block read only.</span>
            <span class="comment">//</span>
            ui32ProtectPE &amp;= ~(0x1 &lt;&lt; ui32Address);

            <span class="comment">//</span>
            <span class="comment">// We&#39;re done handling this protection.</span>
            <span class="comment">//</span>
            <span class="keywordflow">break</span>;
        }

        <span class="comment">//</span>
        <span class="comment">// Make this block read/write.</span>
        <span class="comment">//</span>
        <span class="keywordflow">case</span> <a class="code" href="flash_8h.html#adc37523740e95a78e9c797cef3913d69a5bf698d8f7f06bc2fba40bedee6267ac">FlashReadWrite</a>:
        <span class="keywordflow">default</span>:
        {
            <span class="comment">//</span>
            <span class="comment">// The block can not be made read/write if it is not already</span>
            <span class="comment">// read/write.</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span>((((ui32ProtectRE &gt;&gt; ui32Address) &amp; 0x1) != 0x1) ||
               (((ui32ProtectPE &gt;&gt; ui32Address) &amp; 0x1) != 0x1))
            {
                <span class="keywordflow">return</span>(-1);
            }

            <span class="comment">//</span>
            <span class="comment">// The block is already read/write, so there is nothing to do.</span>
            <span class="comment">//</span>
            <span class="keywordflow">return</span>(0);
        }
    }

    <span class="comment">//</span>
    <span class="comment">// Set the new protection for the specified flash bank.</span>
    <span class="comment">//</span>
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="group__flash__api.html#ga0cae6c69611a5f796fb7a35edef7cea1">g_pui32FMPRERegs</a>[ui32Bank]) = ui32ProtectRE;
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="group__flash__api.html#ga23a5a76ad44537438c85b6fdd5eb6bd4">g_pui32FMPPERegs</a>[ui32Bank]) = ui32ProtectPE;

    <span class="comment">//</span>
    <span class="comment">// Success.</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span>(0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga78a8e8c1032a58ce2cc79954b26c274e"></a><!-- doxytag: member="flash.c::FlashUserGet" ref="ga78a8e8c1032a58ce2cc79954b26c274e" args="(uint32_t *pui32User0, uint32_t *pui32User1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="group__flash__api.html#ga78a8e8c1032a58ce2cc79954b26c274e">FlashUserGet</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pui32User0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pui32User1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets the user registers.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pui32User0</td><td>is a pointer to the location to store USER Register 0. </td></tr>
    <tr><td class="paramname">pui32User1</td><td>is a pointer to the location to store USER Register 1.</td></tr>
  </table>
  </dd>
</dl>
<p>This function reads the contents of user registers 0 and 1, and stores them in the specified locations.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, or -1 if a hardware error is encountered. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00534">534</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="debug_8h_source.html#l00067">ASSERT</a>, <a class="el" href="hw__flash_8h_source.html#l00070">FLASH_USERREG0</a>, <a class="el" href="hw__flash_8h_source.html#l00071">FLASH_USERREG1</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Verify that the pointers are valid.</span>
    <span class="comment">//</span>
    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>(pui32User0 != 0);
    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>(pui32User1 != 0);

    <span class="comment">//</span>
    <span class="comment">// Get and store the current value of the user registers.</span>
    <span class="comment">//</span>
    *pui32User0 = <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#afe6509e88317f4227d1d42bf84cadbe0">FLASH_USERREG0</a>);
    *pui32User1 = <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a68cc8da960af2919e813794ea5121073">FLASH_USERREG1</a>);

    <span class="comment">//</span>
    <span class="comment">// Success.</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span>(0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga8e168d8745037e9b2554100f433509de"></a><!-- doxytag: member="flash.c::FlashUserSave" ref="ga8e168d8745037e9b2554100f433509de" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="group__flash__api.html#ga8e168d8745037e9b2554100f433509de">FlashUserSave</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Saves the user registers.</p>
<p>This function makes the currently programmed user register 0 and 1 settings permanent. This operation is non-reversible; a chip reset or power cycle does not change the flash protection.</p>
<p>This function does not return until the protection has been saved.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, or -1 if a hardware error is encountered. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00596">596</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="hw__flash_8h_source.html#l00048">FLASH_FMA</a>, <a class="el" href="hw__flash_8h_source.html#l00050">FLASH_FMC</a>, <a class="el" href="hw__flash_8h_source.html#l00161">FLASH_FMC_COMT</a>, <a class="el" href="hw__flash_8h_source.html#l00160">FLASH_FMC_WRKEY</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Setting the MSB of FMA will trigger a permanent save of a USER</span>
    <span class="comment">// register.  Bit 0 will indicate User 0 (0) or User 1 (1).</span>
    <span class="comment">//</span>
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#acec37e62cb88a0d40af83c466d03151f">FLASH_FMA</a>) = 0x80000000;
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a89c6418eced607811aec6c584f004215">FLASH_FMC</a>) = <a class="code" href="hw__flash_8h.html#ad459e0bf007541fd064f4a6f85651ede">FLASH_FMC_WRKEY</a> | <a class="code" href="hw__flash_8h.html#a9c7c67a4856820820fe1843e2507774f">FLASH_FMC_COMT</a>;

    <span class="comment">//</span>
    <span class="comment">// Wait until the write has completed.</span>
    <span class="comment">//</span>
    <span class="keywordflow">while</span>(<a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a89c6418eced607811aec6c584f004215">FLASH_FMC</a>) &amp; <a class="code" href="hw__flash_8h.html#a9c7c67a4856820820fe1843e2507774f">FLASH_FMC_COMT</a>)
    {
    }

    <span class="comment">//</span>
    <span class="comment">// Tell the flash controller to write the USER1 Register.</span>
    <span class="comment">//</span>
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#acec37e62cb88a0d40af83c466d03151f">FLASH_FMA</a>) = 0x80000001;
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a89c6418eced607811aec6c584f004215">FLASH_FMC</a>) = <a class="code" href="hw__flash_8h.html#ad459e0bf007541fd064f4a6f85651ede">FLASH_FMC_WRKEY</a> | <a class="code" href="hw__flash_8h.html#a9c7c67a4856820820fe1843e2507774f">FLASH_FMC_COMT</a>;

    <span class="comment">//</span>
    <span class="comment">// Wait until the write has completed.</span>
    <span class="comment">//</span>
    <span class="keywordflow">while</span>(<a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a89c6418eced607811aec6c584f004215">FLASH_FMC</a>) &amp; FLASH_FMC_COMT)
    {
    }

    <span class="comment">//</span>
    <span class="comment">// Success.</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span>(0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga105d8abeae98272161e563f146f13075"></a><!-- doxytag: member="flash.c::FlashUserSet" ref="ga105d8abeae98272161e563f146f13075" args="(uint32_t ui32User0, uint32_t ui32User1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="group__flash__api.html#ga105d8abeae98272161e563f146f13075">FlashUserSet</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32User0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32User1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the user registers.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32User0</td><td>is the value to store in USER Register 0. </td></tr>
    <tr><td class="paramname">ui32User1</td><td>is the value to store in USER Register 1.</td></tr>
  </table>
  </dd>
</dl>
<p>This function sets the contents of the user registers 0 and 1 to the specified values.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, or -1 if a hardware error is encountered. </dd></dl>

<p>Definition at line <a class="el" href="flash_8c_source.html#l00568">568</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>References <a class="el" href="hw__flash_8h_source.html#l00070">FLASH_USERREG0</a>, <a class="el" href="hw__flash_8h_source.html#l00071">FLASH_USERREG1</a>, and <a class="el" href="hw__types_8h_source.html#l00048">HWREG</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Save the new values into the user registers.</span>
    <span class="comment">//</span>
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#afe6509e88317f4227d1d42bf84cadbe0">FLASH_USERREG0</a>) = ui32User0;
    <a class="code" href="hw__types_8h.html#ac9660181819fceac0b5abcd67d76ca6e">HWREG</a>(<a class="code" href="hw__flash_8h.html#a68cc8da960af2919e813794ea5121073">FLASH_USERREG1</a>) = ui32User1;

    <span class="comment">//</span>
    <span class="comment">// Success.</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span>(0);
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga23a5a76ad44537438c85b6fdd5eb6bd4"></a><!-- doxytag: member="flash.c::g_pui32FMPPERegs" ref="ga23a5a76ad44537438c85b6fdd5eb6bd4" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t <a class="el" href="group__flash__api.html#ga23a5a76ad44537438c85b6fdd5eb6bd4">g_pui32FMPPERegs</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
    <a class="code" href="hw__flash_8h.html#a3028445869b36361f6776795d0ea2593">FLASH_FMPPE0</a>,
    <a class="code" href="hw__flash_8h.html#a87a62fd89bb9bc5a48b9e3f0df3938f9">FLASH_FMPPE1</a>,
    <a class="code" href="hw__flash_8h.html#ad3e0cac90b1d5a1daaf3875583a63f6d">FLASH_FMPPE2</a>,
    <a class="code" href="hw__flash_8h.html#ad7395050d353cd71f7d106e8d8f16546">FLASH_FMPPE3</a>,
    <a class="code" href="hw__flash_8h.html#a043f5df6bb446f897bcb5808fbca59ec">FLASH_FMPPE4</a>,
    <a class="code" href="hw__flash_8h.html#a11bca6e074de75b4d2923a43f90f17db">FLASH_FMPPE5</a>,
    <a class="code" href="hw__flash_8h.html#a2c9ee165f78b8dd5346f5a128b88b80a">FLASH_FMPPE6</a>,
    <a class="code" href="hw__flash_8h.html#a95c06bff32bbdfc06a15064815dd9316">FLASH_FMPPE7</a>,
    <a class="code" href="hw__flash_8h.html#a9abdc08b07ea97fe2ac1a1454073f536">FLASH_FMPPE8</a>,
    <a class="code" href="hw__flash_8h.html#a43d1a2b1e27da3fbe29b6698e9a6b5e6">FLASH_FMPPE9</a>,
    <a class="code" href="hw__flash_8h.html#aa56e12d3bb9c81849dcb5c2a7e2f9dee">FLASH_FMPPE10</a>,
    <a class="code" href="hw__flash_8h.html#a1dfdd1a401329f076e7b7c229d023622">FLASH_FMPPE11</a>,
    <a class="code" href="hw__flash_8h.html#ad29de9b42190731a03ed47958b127cd8">FLASH_FMPPE12</a>,
    <a class="code" href="hw__flash_8h.html#ab035897666b714ca5622fdf2314f3454">FLASH_FMPPE13</a>,
    <a class="code" href="hw__flash_8h.html#abdef2a99c7f8811399c20cecb756ca6f">FLASH_FMPPE14</a>,
    <a class="code" href="hw__flash_8h.html#ae38e3e0dcc563322b38134337eda56ee">FLASH_FMPPE15</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="flash_8c_source.html#l00063">63</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>Referenced by <a class="el" href="flash_8c_source.html#l00276">FlashProtectGet()</a>, and <a class="el" href="flash_8c_source.html#l00365">FlashProtectSet()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0cae6c69611a5f796fb7a35edef7cea1"></a><!-- doxytag: member="flash.c::g_pui32FMPRERegs" ref="ga0cae6c69611a5f796fb7a35edef7cea1" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t <a class="el" href="group__flash__api.html#ga0cae6c69611a5f796fb7a35edef7cea1">g_pui32FMPRERegs</a>[]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
    <a class="code" href="hw__flash_8h.html#ae0a9a8243b30c8d8b1671f9219bb7c54">FLASH_FMPRE0</a>,
    <a class="code" href="hw__flash_8h.html#ad651c71bb5c5bba9d0799c9985872d13">FLASH_FMPRE1</a>,
    <a class="code" href="hw__flash_8h.html#afcfa3dd678daa83b5c6f42bb17fceca2">FLASH_FMPRE2</a>,
    <a class="code" href="hw__flash_8h.html#aba1a16b40f371fc33d3638ea76b9e0eb">FLASH_FMPRE3</a>,
    <a class="code" href="hw__flash_8h.html#ac2c7d20cbea39561ddfc62218eb967c3">FLASH_FMPRE4</a>,
    <a class="code" href="hw__flash_8h.html#a77aa55e05897a3fc1bf2acdf8d92b6c1">FLASH_FMPRE5</a>,
    <a class="code" href="hw__flash_8h.html#a16581fd91ee7e9cbf63c043f48f0b338">FLASH_FMPRE6</a>,
    <a class="code" href="hw__flash_8h.html#a416e050dca972a9e8eb7c08892967c86">FLASH_FMPRE7</a>,
    <a class="code" href="hw__flash_8h.html#a031e1bb5c31b2601b7da74231d074823">FLASH_FMPRE8</a>,
    <a class="code" href="hw__flash_8h.html#af86db0eca9fac14dee5a6042a336d33b">FLASH_FMPRE9</a>,
    <a class="code" href="hw__flash_8h.html#ab7374ecf7f9fa8b4ffb2cc37fe8ea482">FLASH_FMPRE10</a>,
    <a class="code" href="hw__flash_8h.html#a3149f1ba77eb694eeb9132b012e92c39">FLASH_FMPRE11</a>,
    <a class="code" href="hw__flash_8h.html#a5f2e8787177c6aa98ff443716bddf296">FLASH_FMPRE12</a>,
    <a class="code" href="hw__flash_8h.html#a276b764ff2a33bbdc00df23a38923dfe">FLASH_FMPRE13</a>,
    <a class="code" href="hw__flash_8h.html#a066520eff7b75645c0ce0a856ae89d8d">FLASH_FMPRE14</a>,
    <a class="code" href="hw__flash_8h.html#a5ee699141e20c9d2843daf55a27a0c35">FLASH_FMPRE15</a>,
}
</pre></div>
<p>Definition at line <a class="el" href="flash_8c_source.html#l00089">89</a> of file <a class="el" href="flash_8c_source.html">flash.c</a>.</p>

<p>Referenced by <a class="el" href="flash_8c_source.html#l00276">FlashProtectGet()</a>, and <a class="el" href="flash_8c_source.html#l00365">FlashProtectSet()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Tue Jan 27 2015 22:41:21 for EE445M Real Time Operating Systems by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
