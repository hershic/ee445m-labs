<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>EE445M Real Time Operating Systems: Scheduler_api</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">EE445M Real Time Operating Systems
   
   </div>
   <div id="projectbrief">Taken at the University of Texas Spring 2015</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__scheduler__api.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Scheduler_api</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structt_scheduler_task.html">tSchedulerTask</a></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#ga7a752586fafee988a93c784961b26f83">tSchedulerFunction</a> )(void *pvParam)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#ga33d1a39eda1eb3865b92457be34b5a63">SchedulerSysTickIntHandler</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#ga2ed1fb3704cb426cbb887f8061a12e12">SchedulerInit</a> (uint32_t ui32TicksPerSecond)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#ga3f2a0376b6d8aaf4d7aa98924c4f3788">SchedulerRun</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#gadd0709e8d6a81b83c46b538f1e5c8c04">SchedulerTaskEnable</a> (uint32_t ui32Index, bool bRunNow)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#gab1fe4767e1d532fd6cca4cc38dcb2323">SchedulerTaskDisable</a> (uint32_t ui32Index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#ga7c659662570a71d12edfcec7dc446ec6">SchedulerTickCountGet</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#ga6dd197b92caf0d488f474eb56b1e2458">SchedulerElapsedTicksGet</a> (uint32_t ui32TickCount)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#ga0b3bc4f69da3533cd0eb226ce68f46bb">SchedulerElapsedTicksCalc</a> (uint32_t ui32TickStart, uint32_t ui32TickEnd)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#ga581cb432a63d4895e740876b6c4a2fe9">g_ui32SchedulerTickCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structt_scheduler_task.html">tSchedulerTask</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scheduler__api.html#ga721f1c866648e9fe8293537f28483edc">g_ui32SchedulerNumTasks</a></td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga7a752586fafee988a93c784961b26f83"></a><!-- doxytag: member="scheduler.h::tSchedulerFunction" ref="ga7a752586fafee988a93c784961b26f83" args=")(void *pvParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__scheduler__api.html#ga7a752586fafee988a93c784961b26f83">tSchedulerFunction</a>)(void *pvParam)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="scheduler_8h_source.html#l00050">50</a> of file <a class="el" href="scheduler_8h_source.html">scheduler.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga0b3bc4f69da3533cd0eb226ce68f46bb"></a><!-- doxytag: member="scheduler.c::SchedulerElapsedTicksCalc" ref="ga0b3bc4f69da3533cd0eb226ce68f46bb" args="(uint32_t ui32TickStart, uint32_t ui32TickEnd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="group__scheduler__api.html#ga0b3bc4f69da3533cd0eb226ce68f46bb">SchedulerElapsedTicksCalc</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32TickStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32TickEnd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of ticks elapsed between two times.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32TickStart</td><td>is the system tick count for the start of the period. </td></tr>
    <tr><td class="paramname">ui32TickEnd</td><td>is the system tick count for the end of the period.</td></tr>
  </table>
  </dd>
</dl>
<p>This function may be called by a client to determine the number of ticks which have elapsed between provided starting and ending tick counts. The function takes into account wrapping cases where the end tick count is lower than the starting count assuming that the ending tick count always represents a later time than the starting count.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of ticks elapsed between the provided start and end counts. </dd></dl>

<p>Definition at line <a class="el" href="scheduler_8c_source.html#l00299">299</a> of file <a class="el" href="scheduler_8c_source.html">scheduler.c</a>.</p>

<p>Referenced by <a class="el" href="scheduler_8c_source.html#l00272">SchedulerElapsedTicksGet()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span>((ui32TickEnd &gt; ui32TickStart) ? (ui32TickEnd - ui32TickStart) :
           ((0xFFFFFFFF - ui32TickStart) + ui32TickEnd + 1));
}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__scheduler__api_ga0b3bc4f69da3533cd0eb226ce68f46bb_icgraph.png" border="0" usemap="#group__scheduler__api_ga0b3bc4f69da3533cd0eb226ce68f46bb_icgraph" alt=""/></div>
<map name="group__scheduler__api_ga0b3bc4f69da3533cd0eb226ce68f46bb_icgraph" id="group__scheduler__api_ga0b3bc4f69da3533cd0eb226ce68f46bb_icgraph">
<area shape="rect" id="node3" href="group__scheduler__api.html#ga6dd197b92caf0d488f474eb56b1e2458" title="SchedulerElapsedTicksGet" alt="" coords="241,5,420,35"/><area shape="rect" id="node5" href="group__scheduler__api.html#ga3f2a0376b6d8aaf4d7aa98924c4f3788" title="SchedulerRun" alt="" coords="469,5,573,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga6dd197b92caf0d488f474eb56b1e2458"></a><!-- doxytag: member="scheduler.c::SchedulerElapsedTicksGet" ref="ga6dd197b92caf0d488f474eb56b1e2458" args="(uint32_t ui32TickCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="group__scheduler__api.html#ga6dd197b92caf0d488f474eb56b1e2458">SchedulerElapsedTicksGet</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32TickCount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of ticks elapsed since the provided tick count.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32TickCount</td><td>is the tick count from which to determine the elapsed time.</td></tr>
  </table>
  </dd>
</dl>
<p>This function may be called by a client to determine how much time has passed since a particular tick count provided in the <em>ui32TickCount</em> parameter. This function takes into account wrapping of the global tick counter and assumes that the provided tick count always represents a time in the past. The returned value will, of course, be wrong if the tick counter has wrapped more than once since the passed <em>ui32TickCount</em>. As a result, please do not use this function if you are dealing with timeouts of 497 days or longer (assuming you use a 10mS tick period).</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of ticks elapsed since the provided tick count. </dd></dl>

<p>Definition at line <a class="el" href="scheduler_8c_source.html#l00272">272</a> of file <a class="el" href="scheduler_8c_source.html">scheduler.c</a>.</p>

<p>References <a class="el" href="scheduler_8c_source.html#l00042">g_ui32SchedulerTickCount</a>, and <a class="el" href="scheduler_8c_source.html#l00299">SchedulerElapsedTicksCalc()</a>.</p>

<p>Referenced by <a class="el" href="scheduler_8c_source.html#l00114">SchedulerRun()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Determine the calculation based upon whether the global tick count has</span>
    <span class="comment">// wrapped since the passed ui32TickCount.</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span>(<a class="code" href="group__scheduler__api.html#ga0b3bc4f69da3533cd0eb226ce68f46bb">SchedulerElapsedTicksCalc</a>(ui32TickCount, <a class="code" href="group__scheduler__api.html#ga581cb432a63d4895e740876b6c4a2fe9">g_ui32SchedulerTickCount</a>));
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__scheduler__api_ga6dd197b92caf0d488f474eb56b1e2458_cgraph.png" border="0" usemap="#group__scheduler__api_ga6dd197b92caf0d488f474eb56b1e2458_cgraph" alt=""/></div>
<map name="group__scheduler__api_ga6dd197b92caf0d488f474eb56b1e2458_cgraph" id="group__scheduler__api_ga6dd197b92caf0d488f474eb56b1e2458_cgraph">
<area shape="rect" id="node3" href="group__scheduler__api.html#ga0b3bc4f69da3533cd0eb226ce68f46bb" title="SchedulerElapsedTicksCalc" alt="" coords="235,5,421,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__scheduler__api_ga6dd197b92caf0d488f474eb56b1e2458_icgraph.png" border="0" usemap="#group__scheduler__api_ga6dd197b92caf0d488f474eb56b1e2458_icgraph" alt=""/></div>
<map name="group__scheduler__api_ga6dd197b92caf0d488f474eb56b1e2458_icgraph" id="group__scheduler__api_ga6dd197b92caf0d488f474eb56b1e2458_icgraph">
<area shape="rect" id="node3" href="group__scheduler__api.html#ga3f2a0376b6d8aaf4d7aa98924c4f3788" title="SchedulerRun" alt="" coords="235,5,339,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga2ed1fb3704cb426cbb887f8061a12e12"></a><!-- doxytag: member="scheduler.c::SchedulerInit" ref="ga2ed1fb3704cb426cbb887f8061a12e12" args="(uint32_t ui32TicksPerSecond)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__scheduler__api.html#ga2ed1fb3704cb426cbb887f8061a12e12">SchedulerInit</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32TicksPerSecond</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the task scheduler.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32TicksPerSecond</td><td>sets the basic frequency of the SysTick interrupt used by the scheduler to determine when to run the various task functions.</td></tr>
  </table>
  </dd>
</dl>
<p>This function must be called during application startup to configure the SysTick timer. This is used by the scheduler module to determine when each of the functions provided in the g_psSchedulerTable array is called.</p>
<p>The caller is responsible for ensuring that <a class="el" href="group__scheduler__api.html#ga33d1a39eda1eb3865b92457be34b5a63">SchedulerSysTickIntHandler()</a> has previously been installed in the SYSTICK vector in the vector table and must also ensure that interrupts are enabled at the CPU level.</p>
<p>Note that this call does not start the scheduler calling the configured functions. All function calls are made in the context of later calls to <a class="el" href="group__scheduler__api.html#ga3f2a0376b6d8aaf4d7aa98924c4f3788">SchedulerRun()</a>. This call merely configures the SysTick interrupt that is used by the scheduler to determine what the current system time is.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="scheduler_8c_source.html#l00084">84</a> of file <a class="el" href="scheduler_8c_source.html">scheduler.c</a>.</p>

<p>References <a class="el" href="debug_8h_source.html#l00067">ASSERT</a>, <a class="el" href="sysctl_8c_source.html#l02727">SysCtlClockGet()</a>, <a class="el" href="systick_8c_source.html#l00075">SysTickEnable()</a>, <a class="el" href="systick_8c_source.html#l00174">SysTickIntEnable()</a>, and <a class="el" href="systick_8c_source.html#l00221">SysTickPeriodSet()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>(ui32TicksPerSecond);

    <span class="comment">//</span>
    <span class="comment">// Configure SysTick for a periodic interrupt.</span>
    <span class="comment">//</span>
    <a class="code" href="group__systick__api.html#ga5892f33d986c614769aa4cfe20bfc80d">SysTickPeriodSet</a>(<a class="code" href="group__sysctl__api.html#ga97d96b02b249a16354577bde88ece728">SysCtlClockGet</a>() / ui32TicksPerSecond);
    <a class="code" href="group__systick__api.html#ga6fa7e44c447e4f861e63a2bf4d175afd">SysTickEnable</a>();
    <a class="code" href="group__systick__api.html#gae9621f9d2bcf0cfe021cd5b7ff98edcc">SysTickIntEnable</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__scheduler__api_ga2ed1fb3704cb426cbb887f8061a12e12_cgraph.png" border="0" usemap="#group__scheduler__api_ga2ed1fb3704cb426cbb887f8061a12e12_cgraph" alt=""/></div>
<map name="group__scheduler__api_ga2ed1fb3704cb426cbb887f8061a12e12_cgraph" id="group__scheduler__api_ga2ed1fb3704cb426cbb887f8061a12e12_cgraph">
<area shape="rect" id="node3" href="group__sysctl__api.html#ga97d96b02b249a16354577bde88ece728" title="SysCtlClockGet" alt="" coords="157,5,275,35"/><area shape="rect" id="node5" href="group__systick__api.html#ga6fa7e44c447e4f861e63a2bf4d175afd" title="SysTickEnable" alt="" coords="161,59,271,88"/><area shape="rect" id="node7" href="group__systick__api.html#gae9621f9d2bcf0cfe021cd5b7ff98edcc" title="SysTickIntEnable" alt="" coords="153,112,279,141"/><area shape="rect" id="node9" href="group__systick__api.html#ga5892f33d986c614769aa4cfe20bfc80d" title="SysTickPeriodSet" alt="" coords="153,165,279,195"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3f2a0376b6d8aaf4d7aa98924c4f3788"></a><!-- doxytag: member="scheduler.c::SchedulerRun" ref="ga3f2a0376b6d8aaf4d7aa98924c4f3788" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__scheduler__api.html#ga3f2a0376b6d8aaf4d7aa98924c4f3788">SchedulerRun</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Instructs the scheduler to update its task table and make calls to functions needing called.</p>
<p>This function must be called periodically by the client to allow the scheduler to make calls to any configured task functions if it is their time to be called. The call must be made at least as frequently as the most frequent task configured in the g_psSchedulerTable array.</p>
<p>Although the scheduler makes use of the SysTick interrupt, all calls to functions configured in <em>g_psSchedulerTable</em> are made in the context of <a class="el" href="group__scheduler__api.html#ga3f2a0376b6d8aaf4d7aa98924c4f3788">SchedulerRun()</a>.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="scheduler_8c_source.html#l00114">114</a> of file <a class="el" href="scheduler_8c_source.html">scheduler.c</a>.</p>

<p>References <a class="el" href="scheduler_8h_source.html#l00089">tSchedulerTask::bActive</a>, <a class="el" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a>, <a class="el" href="group__scheduler__api.html#ga721f1c866648e9fe8293537f28483edc">g_ui32SchedulerNumTasks</a>, <a class="el" href="scheduler_8c_source.html#l00042">g_ui32SchedulerTickCount</a>, <a class="el" href="scheduler_8h_source.html#l00064">tSchedulerTask::pfnFunction</a>, <a class="el" href="scheduler_8h_source.html#l00069">tSchedulerTask::pvParam</a>, <a class="el" href="scheduler_8c_source.html#l00272">SchedulerElapsedTicksGet()</a>, <a class="el" href="scheduler_8h_source.html#l00076">tSchedulerTask::ui32FrequencyTicks</a>, and <a class="el" href="scheduler_8h_source.html#l00082">tSchedulerTask::ui32LastCall</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32_t ui32Loop;
    <a class="code" href="structt_scheduler_task.html">tSchedulerTask</a> *pi16Task;

    <span class="comment">//</span>
    <span class="comment">// Loop through each task in the task table.</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span>(ui32Loop = 0; ui32Loop &lt; <a class="code" href="group__scheduler__api.html#ga721f1c866648e9fe8293537f28483edc">g_ui32SchedulerNumTasks</a>; ui32Loop++)
    {
        <span class="comment">//</span>
        <span class="comment">// Get a pointer to the task information.</span>
        <span class="comment">//</span>
        pi16Task = &amp;<a class="code" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a>[ui32Loop];

        <span class="comment">//</span>
        <span class="comment">// Is this task active and, if so, is it time to call it&#39;s function?</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span>(pi16Task-&gt;<a class="code" href="structt_scheduler_task.html#a241e706e2b7f65423428f4a5aa834258">bActive</a> &amp;&amp;
           (<a class="code" href="group__scheduler__api.html#ga6dd197b92caf0d488f474eb56b1e2458">SchedulerElapsedTicksGet</a>(pi16Task-&gt;<a class="code" href="structt_scheduler_task.html#ab02bbfa850f7be008f7c437674c3fe40">ui32LastCall</a>) &gt;=
            pi16Task-&gt;<a class="code" href="structt_scheduler_task.html#a0e3ec3a3713cdb494950e490a1a8558f">ui32FrequencyTicks</a>))
        {
            <span class="comment">//</span>
            <span class="comment">// Remember the timestamp at which we make the function call.</span>
            <span class="comment">//</span>
            pi16Task-&gt;<a class="code" href="structt_scheduler_task.html#ab02bbfa850f7be008f7c437674c3fe40">ui32LastCall</a> = <a class="code" href="group__scheduler__api.html#ga581cb432a63d4895e740876b6c4a2fe9">g_ui32SchedulerTickCount</a>;

            <span class="comment">//</span>
            <span class="comment">// Call the task function, passing the provided parameter.</span>
            <span class="comment">//</span>
            pi16Task-&gt;<a class="code" href="structt_scheduler_task.html#a200014955dd6532ffa4cb970ffd9de4e">pfnFunction</a>(pi16Task-&gt;<a class="code" href="structt_scheduler_task.html#a83923e9d1c3a022f865d0018a5e51f66" title="The parameter which is to be passed to this function when it is called.">pvParam</a>);
        }
    }
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__scheduler__api_ga3f2a0376b6d8aaf4d7aa98924c4f3788_cgraph.png" border="0" usemap="#group__scheduler__api_ga3f2a0376b6d8aaf4d7aa98924c4f3788_cgraph" alt=""/></div>
<map name="group__scheduler__api_ga3f2a0376b6d8aaf4d7aa98924c4f3788_cgraph" id="group__scheduler__api_ga3f2a0376b6d8aaf4d7aa98924c4f3788_cgraph">
<area shape="rect" id="node3" href="group__scheduler__api.html#ga6dd197b92caf0d488f474eb56b1e2458" title="SchedulerElapsedTicksGet" alt="" coords="159,5,337,35"/><area shape="rect" id="node5" href="group__scheduler__api.html#ga0b3bc4f69da3533cd0eb226ce68f46bb" title="SchedulerElapsedTicksCalc" alt="" coords="387,5,573,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga33d1a39eda1eb3865b92457be34b5a63"></a><!-- doxytag: member="scheduler.c::SchedulerSysTickIntHandler" ref="ga33d1a39eda1eb3865b92457be34b5a63" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__scheduler__api.html#ga33d1a39eda1eb3865b92457be34b5a63">SchedulerSysTickIntHandler</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handles the SysTick interrupt on behalf of the scheduler module.</p>
<p>Applications using the scheduler module must ensure that this function is hooked to the SysTick interrupt vector.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="scheduler_8c_source.html#l00055">55</a> of file <a class="el" href="scheduler_8c_source.html">scheduler.c</a>.</p>

<p>References <a class="el" href="scheduler_8c_source.html#l00042">g_ui32SchedulerTickCount</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="group__scheduler__api.html#ga581cb432a63d4895e740876b6c4a2fe9">g_ui32SchedulerTickCount</a>++;
}
</pre></div>
</div>
</div>
<a class="anchor" id="gab1fe4767e1d532fd6cca4cc38dcb2323"></a><!-- doxytag: member="scheduler.c::SchedulerTaskDisable" ref="gab1fe4767e1d532fd6cca4cc38dcb2323" args="(uint32_t ui32Index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__scheduler__api.html#gab1fe4767e1d532fd6cca4cc38dcb2323">SchedulerTaskDisable</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disables a task and prevents the scheduler from calling it.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Index</td><td>is the index of the task which is to be disabled in the global <em>g_psSchedulerTable</em> array.</td></tr>
  </table>
  </dd>
</dl>
<p>This function marks one of the configured tasks as inactive and prevents <a class="el" href="group__scheduler__api.html#ga3f2a0376b6d8aaf4d7aa98924c4f3788">SchedulerRun()</a> from calling it. The task may be reenabled by calling <a class="el" href="group__scheduler__api.html#gadd0709e8d6a81b83c46b538f1e5c8c04">SchedulerTaskEnable()</a>.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="scheduler_8c_source.html#l00221">221</a> of file <a class="el" href="scheduler_8c_source.html">scheduler.c</a>.</p>

<p>References <a class="el" href="scheduler_8h_source.html#l00089">tSchedulerTask::bActive</a>, <a class="el" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a>, and <a class="el" href="group__scheduler__api.html#ga721f1c866648e9fe8293537f28483edc">g_ui32SchedulerNumTasks</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Is the task index passed valid?</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span>(ui32Index &lt; <a class="code" href="group__scheduler__api.html#ga721f1c866648e9fe8293537f28483edc">g_ui32SchedulerNumTasks</a>)
    {
        <span class="comment">//</span>
        <span class="comment">// Yes - mark the task as inactive.</span>
        <span class="comment">//</span>
        <a class="code" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a>[ui32Index].<a class="code" href="structt_scheduler_task.html#a241e706e2b7f65423428f4a5aa834258">bActive</a> = <span class="keyword">false</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="gadd0709e8d6a81b83c46b538f1e5c8c04"></a><!-- doxytag: member="scheduler.c::SchedulerTaskEnable" ref="gadd0709e8d6a81b83c46b538f1e5c8c04" args="(uint32_t ui32Index, bool bRunNow)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__scheduler__api.html#gadd0709e8d6a81b83c46b538f1e5c8c04">SchedulerTaskEnable</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bRunNow</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enables a task and allows the scheduler to call it periodically.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Index</td><td>is the index of the task which is to be enabled in the global <em>g_psSchedulerTable</em> array. </td></tr>
    <tr><td class="paramname">bRunNow</td><td>is <b>true</b> if the task is to be run on the next call to <a class="el" href="group__scheduler__api.html#ga3f2a0376b6d8aaf4d7aa98924c4f3788">SchedulerRun()</a> or <b>false</b> if one whole period is to elapse before the task is run.</td></tr>
  </table>
  </dd>
</dl>
<p>This function marks one of the configured tasks as enabled and causes <a class="el" href="group__scheduler__api.html#ga3f2a0376b6d8aaf4d7aa98924c4f3788">SchedulerRun()</a> to call that task periodically. The caller may choose to have the enabled task run for the first time on the next call to <a class="el" href="group__scheduler__api.html#ga3f2a0376b6d8aaf4d7aa98924c4f3788">SchedulerRun()</a> or to wait one full task period before making the first call.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="scheduler_8c_source.html#l00169">169</a> of file <a class="el" href="scheduler_8c_source.html">scheduler.c</a>.</p>

<p>References <a class="el" href="scheduler_8h_source.html#l00089">tSchedulerTask::bActive</a>, <a class="el" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a>, <a class="el" href="group__scheduler__api.html#ga721f1c866648e9fe8293537f28483edc">g_ui32SchedulerNumTasks</a>, <a class="el" href="scheduler_8c_source.html#l00042">g_ui32SchedulerTickCount</a>, <a class="el" href="scheduler_8h_source.html#l00076">tSchedulerTask::ui32FrequencyTicks</a>, and <a class="el" href="scheduler_8h_source.html#l00082">tSchedulerTask::ui32LastCall</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
    <span class="comment">// Is the task index passed valid?</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span>(ui32Index &lt; <a class="code" href="group__scheduler__api.html#ga721f1c866648e9fe8293537f28483edc">g_ui32SchedulerNumTasks</a>)
    {
        <span class="comment">//</span>
        <span class="comment">// Yes - mark the task as active.</span>
        <span class="comment">//</span>
        <a class="code" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a>[ui32Index].<a class="code" href="structt_scheduler_task.html#a241e706e2b7f65423428f4a5aa834258">bActive</a> = <span class="keyword">true</span>;

        <span class="comment">//</span>
        <span class="comment">// Set the last call time to ensure that the function is called either</span>
        <span class="comment">// next time the scheduler is run or after the desired number of ticks</span>
        <span class="comment">// depending upon the value of the bRunNow parameter.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span>(bRunNow)
        {
            <span class="comment">//</span>
            <span class="comment">// Cause the task to run on the next call to SchedulerRun().</span>
            <span class="comment">//</span>
            <a class="code" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a>[ui32Index].<a class="code" href="structt_scheduler_task.html#ab02bbfa850f7be008f7c437674c3fe40">ui32LastCall</a> =
                (<a class="code" href="group__scheduler__api.html#ga581cb432a63d4895e740876b6c4a2fe9">g_ui32SchedulerTickCount</a> -
                 <a class="code" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a>[ui32Index].<a class="code" href="structt_scheduler_task.html#a0e3ec3a3713cdb494950e490a1a8558f">ui32FrequencyTicks</a>);
        }
        <span class="keywordflow">else</span>
        {
            <span class="comment">//</span>
            <span class="comment">// Cause the task to run after one full time period.</span>
            <span class="comment">//</span>
            <a class="code" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a>[ui32Index].<a class="code" href="structt_scheduler_task.html#ab02bbfa850f7be008f7c437674c3fe40">ui32LastCall</a> =
                <a class="code" href="group__scheduler__api.html#ga581cb432a63d4895e740876b6c4a2fe9">g_ui32SchedulerTickCount</a>;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga7c659662570a71d12edfcec7dc446ec6"></a><!-- doxytag: member="scheduler.c::SchedulerTickCountGet" ref="ga7c659662570a71d12edfcec7dc446ec6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="group__scheduler__api.html#ga7c659662570a71d12edfcec7dc446ec6">SchedulerTickCountGet</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the current system time in ticks since power on.</p>
<p>This function may be called by a client to retrieve the current system time. The value returned is a count of ticks elapsed since the system last booted.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Tick count since last boot. </dd></dl>

<p>Definition at line <a class="el" href="scheduler_8c_source.html#l00247">247</a> of file <a class="el" href="scheduler_8c_source.html">scheduler.c</a>.</p>

<p>References <a class="el" href="scheduler_8c_source.html#l00042">g_ui32SchedulerTickCount</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span>(<a class="code" href="group__scheduler__api.html#ga581cb432a63d4895e740876b6c4a2fe9">g_ui32SchedulerTickCount</a>);
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="gadaed0be000cb8dc1266717a5e34bdf71"></a><!-- doxytag: member="scheduler.h::g_psSchedulerTable" ref="gadaed0be000cb8dc1266717a5e34bdf71" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structt_scheduler_task.html">tSchedulerTask</a> <a class="el" href="group__scheduler__api.html#gadaed0be000cb8dc1266717a5e34bdf71">g_psSchedulerTable</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This global table must be populated by the client and contains information on each function that the scheduler is to call. </p>

<p>Referenced by <a class="el" href="scheduler_8c_source.html#l00114">SchedulerRun()</a>, <a class="el" href="scheduler_8c_source.html#l00221">SchedulerTaskDisable()</a>, and <a class="el" href="scheduler_8c_source.html#l00169">SchedulerTaskEnable()</a>.</p>

</div>
</div>
<a class="anchor" id="ga721f1c866648e9fe8293537f28483edc"></a><!-- doxytag: member="scheduler.h::g_ui32SchedulerNumTasks" ref="ga721f1c866648e9fe8293537f28483edc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="group__scheduler__api.html#ga721f1c866648e9fe8293537f28483edc">g_ui32SchedulerNumTasks</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This global variable must be exported by the client. It must contain the number of entries in the g_psSchedulerTable array. </p>

<p>Referenced by <a class="el" href="scheduler_8c_source.html#l00114">SchedulerRun()</a>, <a class="el" href="scheduler_8c_source.html#l00221">SchedulerTaskDisable()</a>, and <a class="el" href="scheduler_8c_source.html#l00169">SchedulerTaskEnable()</a>.</p>

</div>
</div>
<a class="anchor" id="ga581cb432a63d4895e740876b6c4a2fe9"></a><!-- doxytag: member="scheduler.c::g_ui32SchedulerTickCount" ref="ga581cb432a63d4895e740876b6c4a2fe9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint32_t <a class="el" href="group__scheduler__api.html#ga581cb432a63d4895e740876b6c4a2fe9">g_ui32SchedulerTickCount</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="scheduler_8c_source.html#l00042">42</a> of file <a class="el" href="scheduler_8c_source.html">scheduler.c</a>.</p>

<p>Referenced by <a class="el" href="scheduler_8c_source.html#l00272">SchedulerElapsedTicksGet()</a>, <a class="el" href="scheduler_8c_source.html#l00114">SchedulerRun()</a>, <a class="el" href="scheduler_8c_source.html#l00055">SchedulerSysTickIntHandler()</a>, <a class="el" href="scheduler_8c_source.html#l00169">SchedulerTaskEnable()</a>, and <a class="el" href="scheduler_8c_source.html#l00247">SchedulerTickCountGet()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Tue Jan 27 2015 22:41:22 for EE445M Real Time Operating Systems by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
