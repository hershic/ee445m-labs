<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>EE445M RTOS: Flash_pb_api</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EE445M RTOS
   </div>
   <div id="projectbrief">Taken at the University of Texas Spring 2015</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__flash__pb__api.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Flash_pb_api</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gae9560b79ebc5c7d96bea3c0821a0373a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__pb__api.html#gae9560b79ebc5c7d96bea3c0821a0373a">FLASH_SECTOR_SIZE</a>&#160;&#160;&#160;<a class="el" href="rom__map_8h.html#a4733444c4a83606e8c5da4f15b712bf0">MAP_SysCtlFlashSectorSizeGet</a>()</td></tr>
<tr class="separator:gae9560b79ebc5c7d96bea3c0821a0373a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga41e4a66661ce7849933e9f11135a32c3"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__pb__api.html#ga41e4a66661ce7849933e9f11135a32c3">FlashPBIsValid</a> (uint8_t *pui8Offset)</td></tr>
<tr class="separator:ga41e4a66661ce7849933e9f11135a32c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab243c2b0f158e0a3c8c89d25d923df5f"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__pb__api.html#gab243c2b0f158e0a3c8c89d25d923df5f">FlashPBGet</a> (void)</td></tr>
<tr class="separator:gab243c2b0f158e0a3c8c89d25d923df5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f202e339edf1758a8b484afa19fb074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__pb__api.html#ga0f202e339edf1758a8b484afa19fb074">FlashPBSave</a> (uint8_t *pui8Buffer)</td></tr>
<tr class="separator:ga0f202e339edf1758a8b484afa19fb074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1026232dae81709cbe4f7b956749942"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__pb__api.html#gae1026232dae81709cbe4f7b956749942">FlashPBInit</a> (uint32_t ui32Start, uint32_t ui32End, uint32_t ui32Size)</td></tr>
<tr class="separator:gae1026232dae81709cbe4f7b956749942"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gab42a6589f3783b6f46d545c4c243f9e0"><td class="memItemLeft" align="right" valign="top">static uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__pb__api.html#gab42a6589f3783b6f46d545c4c243f9e0">g_pui8FlashPBStart</a></td></tr>
<tr class="separator:gab42a6589f3783b6f46d545c4c243f9e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4659f8cb42d49528e15842b6f77563d4"><td class="memItemLeft" align="right" valign="top">static uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__pb__api.html#ga4659f8cb42d49528e15842b6f77563d4">g_pui8FlashPBEnd</a></td></tr>
<tr class="separator:ga4659f8cb42d49528e15842b6f77563d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40ccee1f319920630fb706e12ecf6511"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a></td></tr>
<tr class="separator:ga40ccee1f319920630fb706e12ecf6511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ce1bf42893f1d7d6c4277778a5fa76d"><td class="memItemLeft" align="right" valign="top">static uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a></td></tr>
<tr class="separator:ga1ce1bf42893f1d7d6c4277778a5fa76d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gae9560b79ebc5c7d96bea3c0821a0373a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_SECTOR_SIZE&#160;&#160;&#160;<a class="el" href="rom__map_8h.html#a4733444c4a83606e8c5da4f15b712bf0">MAP_SysCtlFlashSectorSizeGet</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="flash__pb_8c_source.html#l00083">83</a> of file <a class="el" href="flash__pb_8c_source.html">flash_pb.c</a>.</p>

<p>Referenced by <a class="el" href="flash__pb_8c_source.html#l00410">FlashPBInit()</a>, and <a class="el" href="flash__pb_8c_source.html#l00200">FlashPBSave()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gab243c2b0f158e0a3c8c89d25d923df5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* FlashPBGet </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the address of the most recent parameter block.</p>
<p>This function returns the address of the most recent parameter block that is stored in flash.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns the address of the most recent parameter block, or NULL if there are no valid parameter blocks in flash. </dd></dl>

<p>Definition at line <a class="el" href="flash__pb_8c_source.html#l00150">150</a> of file <a class="el" href="flash__pb_8c_source.html">flash_pb.c</a>.</p>

<p>References <a class="el" href="flash__pb_8c_source.html#l00076">g_pui8FlashPBCurrent</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// See if there is a valid parameter block.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a>)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">// Return the address of the most recent parameter block.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">return</span>(<a class="code" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// There are no valid parameter blocks in flash, so return NULL.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
<div class="ttc" id="group__flash__pb__api_html_ga1ce1bf42893f1d7d6c4277778a5fa76d"><div class="ttname"><a href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a></div><div class="ttdeci">static uint8_t * g_pui8FlashPBCurrent</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00076">flash_pb.c:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gae1026232dae81709cbe4f7b956749942"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FlashPBInit </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32End</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ui32Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the flash parameter block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ui32Start</td><td>is the address of the flash memory to be used for storing flash parameter blocks; this must be the start of an erase block in the flash. </td></tr>
    <tr><td class="paramname">ui32End</td><td>is the address of the end of flash memory to be used for storing flash parameter blocks; this must be the start of an erase block in the flash (the first block that is NOT part of the flash memory to be used), or the address of the first word after the flash array if the last block of flash is to be used. </td></tr>
    <tr><td class="paramname">ui32Size</td><td>is the size of the parameter block when stored in flash; this must be a power of two less than or equal to the flash erase block size (typically 1024).</td></tr>
  </table>
  </dd>
</dl>
<p>This function initializes a fault-tolerant, persistent storage mechanism for a parameter block for an application. The last several erase blocks of flash (as specified by <em>ui32Start</em> and <em>ui32End</em> are used for the storage; more than one erase block is required in order to be fault-tolerant.</p>
<p>A parameter block is an array of bytes that contain the persistent parameters for the application. The only special requirement for the parameter block is that the first byte is a sequence number (explained in <a class="el" href="group__flash__pb__api.html#ga0f202e339edf1758a8b484afa19fb074">FlashPBSave()</a>) and the second byte is a checksum used to validate the correctness of the data (the checksum byte is the byte such that the sum of all bytes in the parameter block is zero).</p>
<p>The portion of flash for parameter block storage is split into N equal-sized regions, where each region is the size of a parameter block (<em>ui32Size</em>). Each region is scanned to find the most recent valid parameter block. The region that has a valid checksum and has the highest sequence number (with special consideration given to wrapping back to zero) is considered to be the current parameter block.</p>
<p>In order to make this efficient and effective, three conditions must be met. The first is <em>ui32Start</em> and <em>ui32End</em> must be specified such that at least two erase blocks of flash are dedicated to parameter block storage. If not, fault tolerance can not be guaranteed since an erase of a single block will leave a window where there are no valid parameter blocks in flash. The second condition is that the size (<em>ui32Size</em>) of the parameter block must be an integral divisor of the size of an erase block of flash. If not, a parameter block will end up spanning between two erase blocks of flash, making it more difficult to manage. The final condition is that the size of the flash dedicated to parameter blocks (<em>ui32End</em> - <em>ui32Start</em>) divided by the parameter block size (<em>ui32Size</em>) must be less than or equal to 128. If not, it will not be possible in all cases to determine which parameter block is the most recent (specifically when dealing with the sequence number wrapping back to zero).</p>
<p>When the microcontroller is initially programmed, the flash blocks used for parameter block storage are left in an erased state.</p>
<p>This function must be called before any other flash parameter block functions are called.</p>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="flash__pb_8c_source.html#l00410">410</a> of file <a class="el" href="flash__pb_8c_source.html">flash_pb.c</a>.</p>

<p>References <a class="el" href="debug_8h_source.html#l00067">ASSERT</a>, <a class="el" href="flash__pb_8c_source.html#l00083">FLASH_SECTOR_SIZE</a>, <a class="el" href="flash__pb_8c_source.html#l00098">FlashPBIsValid()</a>, <a class="el" href="flash__pb_8c_source.html#l00076">g_pui8FlashPBCurrent</a>, <a class="el" href="flash__pb_8c_source.html#l00060">g_pui8FlashPBEnd</a>, <a class="el" href="flash__pb_8c_source.html#l00050">g_pui8FlashPBStart</a>, and <a class="el" href="flash__pb_8c_source.html#l00069">g_ui32FlashPBSize</a>.</p>
<div class="fragment"><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    uint8_t *pui8Offset, *pui8Current;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    uint8_t ui8One, ui8Two;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// Check the arguments.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>((ui32Start % <a class="code" href="group__flash__pb__api.html#gae9560b79ebc5c7d96bea3c0821a0373a">FLASH_SECTOR_SIZE</a>) == 0);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>((ui32End % <a class="code" href="group__flash__pb__api.html#gae9560b79ebc5c7d96bea3c0821a0373a">FLASH_SECTOR_SIZE</a>) == 0);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>((<a class="code" href="group__flash__pb__api.html#gae9560b79ebc5c7d96bea3c0821a0373a">FLASH_SECTOR_SIZE</a> % ui32Size) == 0);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// Save the characteristics of the flash memory to be used for storing</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// parameter blocks.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="group__flash__pb__api.html#gab42a6589f3783b6f46d545c4c243f9e0">g_pui8FlashPBStart</a> = (uint8_t *)ui32Start;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="group__flash__pb__api.html#ga4659f8cb42d49528e15842b6f77563d4">g_pui8FlashPBEnd</a> = (uint8_t *)ui32End;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a> = ui32Size;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// Loop through the portion of flash memory used for storing parameter</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// blocks.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">for</span>(pui8Offset = <a class="code" href="group__flash__pb__api.html#gab42a6589f3783b6f46d545c4c243f9e0">g_pui8FlashPBStart</a>, pui8Current = 0;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        pui8Offset &lt; <a class="code" href="group__flash__pb__api.html#ga4659f8cb42d49528e15842b6f77563d4">g_pui8FlashPBEnd</a>; pui8Offset += <a class="code" href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a>)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="comment">// See if this is a valid parameter block (in other words, the checksum</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="comment">// is correct).</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="group__flash__pb__api.html#ga41e4a66661ce7849933e9f11135a32c3">FlashPBIsValid</a>(pui8Offset))</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="comment">// See if a valid parameter block has been previously found.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">if</span>(pui8Current != 0)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                <span class="comment">// Get the sequence numbers for the current and new parameter</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                <span class="comment">// blocks.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                ui8One = pui8Current[0];</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                ui8Two = pui8Offset[0];</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="comment">// See if the sequence number for the new parameter block is</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <span class="comment">// greater than the current block.  The comparison isn&#39;t</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                <span class="comment">// straightforward since the one byte sequence number will wrap</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                <span class="comment">// after 256 parameter blocks.</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                <span class="keywordflow">if</span>(((ui8One &gt; ui8Two) &amp;&amp; ((ui8One - ui8Two) &lt; 128)) ||</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                   ((ui8Two &gt; ui8One) &amp;&amp; ((ui8Two - ui8One) &gt; 128)))</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                    <span class="comment">//</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                    <span class="comment">// The new parameter block is older than the current</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                    <span class="comment">// parameter block, so skip the new parameter block and</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                    <span class="comment">// keep searching.</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                    <span class="comment">//</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="comment">// The new parameter block is more recent than the current one, so</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <span class="comment">// make it the new current parameter block.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            pui8Current = pui8Offset;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// Save the address of the most recent parameter block found.  If no valid</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// parameter blocks were found, this will be a NULL pointer.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a> = pui8Current;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div>
<div class="ttc" id="group__flash__pb__api_html_gab42a6589f3783b6f46d545c4c243f9e0"><div class="ttname"><a href="group__flash__pb__api.html#gab42a6589f3783b6f46d545c4c243f9e0">g_pui8FlashPBStart</a></div><div class="ttdeci">static uint8_t * g_pui8FlashPBStart</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00050">flash_pb.c:50</a></div></div>
<div class="ttc" id="debug_8h_html_a28301f76c53b643912da7c538f74e2c6"><div class="ttname"><a href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a></div><div class="ttdeci">#define ASSERT(expr)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00067">debug.h:67</a></div></div>
<div class="ttc" id="group__flash__pb__api_html_ga41e4a66661ce7849933e9f11135a32c3"><div class="ttname"><a href="group__flash__pb__api.html#ga41e4a66661ce7849933e9f11135a32c3">FlashPBIsValid</a></div><div class="ttdeci">static uint32_t FlashPBIsValid(uint8_t *pui8Offset)</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00098">flash_pb.c:98</a></div></div>
<div class="ttc" id="group__flash__pb__api_html_ga1ce1bf42893f1d7d6c4277778a5fa76d"><div class="ttname"><a href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a></div><div class="ttdeci">static uint8_t * g_pui8FlashPBCurrent</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00076">flash_pb.c:76</a></div></div>
<div class="ttc" id="group__flash__pb__api_html_gae9560b79ebc5c7d96bea3c0821a0373a"><div class="ttname"><a href="group__flash__pb__api.html#gae9560b79ebc5c7d96bea3c0821a0373a">FLASH_SECTOR_SIZE</a></div><div class="ttdeci">#define FLASH_SECTOR_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00083">flash_pb.c:83</a></div></div>
<div class="ttc" id="group__flash__pb__api_html_ga40ccee1f319920630fb706e12ecf6511"><div class="ttname"><a href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a></div><div class="ttdeci">static uint32_t g_ui32FlashPBSize</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00069">flash_pb.c:69</a></div></div>
<div class="ttc" id="group__flash__pb__api_html_ga4659f8cb42d49528e15842b6f77563d4"><div class="ttname"><a href="group__flash__pb__api.html#ga4659f8cb42d49528e15842b6f77563d4">g_pui8FlashPBEnd</a></div><div class="ttdeci">static uint8_t * g_pui8FlashPBEnd</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00060">flash_pb.c:60</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__flash__pb__api_gae1026232dae81709cbe4f7b956749942_cgraph.png" border="0" usemap="#group__flash__pb__api_gae1026232dae81709cbe4f7b956749942_cgraph" alt=""/></div>
<map name="group__flash__pb__api_gae1026232dae81709cbe4f7b956749942_cgraph" id="group__flash__pb__api_gae1026232dae81709cbe4f7b956749942_cgraph">
<area shape="rect" id="node2" href="group__flash__pb__api.html#ga41e4a66661ce7849933e9f11135a32c3" title="FlashPBIsValid" alt="" coords="144,5,256,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga41e4a66661ce7849933e9f11135a32c3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t FlashPBIsValid </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pui8Offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determines if the parameter block at the given address is valid.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pui8Offset</td><td>is the address of the parameter block to check.</td></tr>
  </table>
  </dd>
</dl>
<p>This function will compute the checksum of a parameter block in flash to determine if it is valid.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns one if the parameter block is valid and zero if it is not. </dd></dl>

<p>Definition at line <a class="el" href="flash__pb_8c_source.html#l00098">98</a> of file <a class="el" href="flash__pb_8c_source.html">flash_pb.c</a>.</p>

<p>References <a class="el" href="debug_8h_source.html#l00067">ASSERT</a>, and <a class="el" href="flash__pb_8c_source.html#l00069">g_ui32FlashPBSize</a>.</p>

<p>Referenced by <a class="el" href="flash__pb_8c_source.html#l00410">FlashPBInit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    uint32_t ui32Idx, ui32Sum;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Check the arguments.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>(pui8Offset != (<span class="keywordtype">void</span> *)0);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// Loop through the bytes in the block, computing the checksum.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">for</span>(ui32Idx = 0, ui32Sum = 0; ui32Idx &lt; <a class="code" href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a>; ui32Idx++)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        ui32Sum += pui8Offset[ui32Idx];</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// The checksum should be zero, so return a failure if it is not.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span>((ui32Sum &amp; 255) != 0)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// If the sum is equal to the size * 255, then the block is all ones and</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// should not be considered valid.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span>((g_ui32FlashPBSize * 255) == ui32Sum)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// This is a valid parameter block.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span>(1);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div>
<div class="ttc" id="debug_8h_html_a28301f76c53b643912da7c538f74e2c6"><div class="ttname"><a href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a></div><div class="ttdeci">#define ASSERT(expr)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00067">debug.h:67</a></div></div>
<div class="ttc" id="group__flash__pb__api_html_ga40ccee1f319920630fb706e12ecf6511"><div class="ttname"><a href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a></div><div class="ttdeci">static uint32_t g_ui32FlashPBSize</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00069">flash_pb.c:69</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__flash__pb__api_ga41e4a66661ce7849933e9f11135a32c3_icgraph.png" border="0" usemap="#group__flash__pb__api_ga41e4a66661ce7849933e9f11135a32c3_icgraph" alt=""/></div>
<map name="group__flash__pb__api_ga41e4a66661ce7849933e9f11135a32c3_icgraph" id="group__flash__pb__api_ga41e4a66661ce7849933e9f11135a32c3_icgraph">
<area shape="rect" id="node2" href="group__flash__pb__api.html#gae1026232dae81709cbe4f7b956749942" title="FlashPBInit" alt="" coords="165,5,256,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga0f202e339edf1758a8b484afa19fb074"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FlashPBSave </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pui8Buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes a new parameter block to flash.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pui8Buffer</td><td>is the address of the parameter block to be written to flash.</td></tr>
  </table>
  </dd>
</dl>
<p>This function will write a parameter block to flash. Saving the new parameter blocks involves three steps:</p>
<ul>
<li>Setting the sequence number such that it is one greater than the sequence number of the latest parameter block in flash.</li>
<li>Computing the checksum of the parameter block.</li>
<li>Writing the parameter block into the storage immediately following the latest parameter block in flash; if that storage is at the start of an erase block, that block is erased first.</li>
</ul>
<p>By this process, there is always a valid parameter block in flash. If power is lost while writing a new parameter block, the checksum will not match and the partially written parameter block will be ignored. This is what makes this fault-tolerant.</p>
<p>Another benefit of this scheme is that it provides wear leveling on the flash. Since multiple parameter blocks fit into each erase block of flash, and multiple erase blocks are used for parameter block storage, it takes quite a few parameter block saves before flash is re-written.</p>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

<p>Definition at line <a class="el" href="flash__pb_8c_source.html#l00200">200</a> of file <a class="el" href="flash__pb_8c_source.html">flash_pb.c</a>.</p>

<p>References <a class="el" href="debug_8h_source.html#l00067">ASSERT</a>, <a class="el" href="flash__pb_8c_source.html#l00083">FLASH_SECTOR_SIZE</a>, <a class="el" href="flash__pb_8c_source.html#l00076">g_pui8FlashPBCurrent</a>, <a class="el" href="flash__pb_8c_source.html#l00060">g_pui8FlashPBEnd</a>, <a class="el" href="flash__pb_8c_source.html#l00050">g_pui8FlashPBStart</a>, <a class="el" href="flash__pb_8c_source.html#l00069">g_ui32FlashPBSize</a>, <a class="el" href="rom__map_8h_source.html#l01668">MAP_FlashErase</a>, and <a class="el" href="rom__map_8h_source.html#l01661">MAP_FlashProgram</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    uint8_t *pui8New;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    uint32_t ui32Idx, ui32Sum;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// Check the arguments.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a>(pui8Buffer != (<span class="keywordtype">void</span> *)0);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// See if there is a valid parameter block in flash.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a>)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="comment">// Set the sequence number to one greater than the most recent</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">// parameter block.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        pui8Buffer[0] = <a class="code" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a>[0] + 1;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="comment">// Try to write the new parameter block immediately after the most</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">// recent parameter block.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        pui8New = <a class="code" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a> + <a class="code" href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">if</span>(pui8New == <a class="code" href="group__flash__pb__api.html#ga4659f8cb42d49528e15842b6f77563d4">g_pui8FlashPBEnd</a>)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            pui8New = <a class="code" href="group__flash__pb__api.html#gab42a6589f3783b6f46d545c4c243f9e0">g_pui8FlashPBStart</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="comment">// There is not a valid parameter block in flash, so set the sequence</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="comment">// number of this parameter block to zero.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        pui8Buffer[0] = 0;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="comment">// Try to write the new parameter block at the beginning of the flash</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">// space for parameter blocks.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        pui8New = <a class="code" href="group__flash__pb__api.html#gab42a6589f3783b6f46d545c4c243f9e0">g_pui8FlashPBStart</a>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// Compute the checksum of the parameter block to be written.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">for</span>(ui32Idx = 0, ui32Sum = 0; ui32Idx &lt; <a class="code" href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a>; ui32Idx++)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        ui32Sum -= pui8Buffer[ui32Idx];</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// Store the checksum into the parameter block.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    pui8Buffer[1] += ui32Sum;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">// Look for a location to store this parameter block.  This infinite loop</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// will be explicitly broken out of when a valid location is found.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">while</span>(1)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// See if this location is at the start of an erase block.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span>(((uint32_t)pui8New &amp; (<a class="code" href="group__flash__pb__api.html#gae9560b79ebc5c7d96bea3c0821a0373a">FLASH_SECTOR_SIZE</a> - 1)) == 0)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="comment">// Erase this block of the flash.  This does not assume that the</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="comment">// erase succeeded in case this block of the flash has become bad</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="comment">// through too much use.  Given the extremely low frequency that</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="comment">// the parameter blocks are written, this will likely never fail.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="comment">// But, that assumption is not made in order to be safe.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <a class="code" href="rom__map_8h.html#a3c36187721cd1f7ba1f45d7367753dca">MAP_FlashErase</a>((uint32_t)pui8New);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="comment">// Loop through this portion of flash to see if is all ones (in other</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="comment">// words, it is an erased portion of flash).</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">for</span>(ui32Idx = 0; ui32Idx &lt; <a class="code" href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a>; ui32Idx++)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="keywordflow">if</span>(pui8New[ui32Idx] != 0xff)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="comment">// If all bytes in this portion of flash are ones, then break out of</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="comment">// the loop since this is a good location for storing the parameter</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="comment">// block.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">if</span>(ui32Idx == g_ui32FlashPBSize)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="comment">// Increment to the next parameter block location.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        pui8New += <a class="code" href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span>(pui8New == <a class="code" href="group__flash__pb__api.html#ga4659f8cb42d49528e15842b6f77563d4">g_pui8FlashPBEnd</a>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            pui8New = <a class="code" href="group__flash__pb__api.html#gab42a6589f3783b6f46d545c4c243f9e0">g_pui8FlashPBStart</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">// If every possible location has been checked and none are valid, then</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">// it will not be possible to write this parameter block.  Simply</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">// return without writing it.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span>((<a class="code" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a> &amp;&amp; (pui8New == <a class="code" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a>)) ||</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;           (!<a class="code" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a> &amp;&amp; (pui8New == <a class="code" href="group__flash__pb__api.html#gab42a6589f3783b6f46d545c4c243f9e0">g_pui8FlashPBStart</a>)))</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// Write this parameter block to flash.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="rom__map_8h.html#a117a1fdf7bf547f2e7ffed91e3a9d0b4">MAP_FlashProgram</a>((uint32_t *)pui8Buffer, (uint32_t)pui8New,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                     g_ui32FlashPBSize);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// Compare the parameter block data to the data that should now be in</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// flash.  Return if any of the data does not compare, leaving the previous</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// parameter block in flash as the most recent (since the current parameter</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// block failed to properly program).</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">for</span>(ui32Idx = 0; ui32Idx &lt; <a class="code" href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a>; ui32Idx++)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">if</span>(pui8New[ui32Idx] != pui8Buffer[ui32Idx])</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// The new parameter block becomes the most recent parameter block.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a> = pui8New;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div>
<div class="ttc" id="group__flash__pb__api_html_gab42a6589f3783b6f46d545c4c243f9e0"><div class="ttname"><a href="group__flash__pb__api.html#gab42a6589f3783b6f46d545c4c243f9e0">g_pui8FlashPBStart</a></div><div class="ttdeci">static uint8_t * g_pui8FlashPBStart</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00050">flash_pb.c:50</a></div></div>
<div class="ttc" id="rom__map_8h_html_a117a1fdf7bf547f2e7ffed91e3a9d0b4"><div class="ttname"><a href="rom__map_8h.html#a117a1fdf7bf547f2e7ffed91e3a9d0b4">MAP_FlashProgram</a></div><div class="ttdeci">#define MAP_FlashProgram</div><div class="ttdef"><b>Definition:</b> <a href="rom__map_8h_source.html#l01661">rom_map.h:1661</a></div></div>
<div class="ttc" id="debug_8h_html_a28301f76c53b643912da7c538f74e2c6"><div class="ttname"><a href="debug_8h.html#a28301f76c53b643912da7c538f74e2c6">ASSERT</a></div><div class="ttdeci">#define ASSERT(expr)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00067">debug.h:67</a></div></div>
<div class="ttc" id="group__flash__pb__api_html_ga1ce1bf42893f1d7d6c4277778a5fa76d"><div class="ttname"><a href="group__flash__pb__api.html#ga1ce1bf42893f1d7d6c4277778a5fa76d">g_pui8FlashPBCurrent</a></div><div class="ttdeci">static uint8_t * g_pui8FlashPBCurrent</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00076">flash_pb.c:76</a></div></div>
<div class="ttc" id="group__flash__pb__api_html_gae9560b79ebc5c7d96bea3c0821a0373a"><div class="ttname"><a href="group__flash__pb__api.html#gae9560b79ebc5c7d96bea3c0821a0373a">FLASH_SECTOR_SIZE</a></div><div class="ttdeci">#define FLASH_SECTOR_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00083">flash_pb.c:83</a></div></div>
<div class="ttc" id="rom__map_8h_html_a3c36187721cd1f7ba1f45d7367753dca"><div class="ttname"><a href="rom__map_8h.html#a3c36187721cd1f7ba1f45d7367753dca">MAP_FlashErase</a></div><div class="ttdeci">#define MAP_FlashErase</div><div class="ttdef"><b>Definition:</b> <a href="rom__map_8h_source.html#l01668">rom_map.h:1668</a></div></div>
<div class="ttc" id="group__flash__pb__api_html_ga40ccee1f319920630fb706e12ecf6511"><div class="ttname"><a href="group__flash__pb__api.html#ga40ccee1f319920630fb706e12ecf6511">g_ui32FlashPBSize</a></div><div class="ttdeci">static uint32_t g_ui32FlashPBSize</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00069">flash_pb.c:69</a></div></div>
<div class="ttc" id="group__flash__pb__api_html_ga4659f8cb42d49528e15842b6f77563d4"><div class="ttname"><a href="group__flash__pb__api.html#ga4659f8cb42d49528e15842b6f77563d4">g_pui8FlashPBEnd</a></div><div class="ttdeci">static uint8_t * g_pui8FlashPBEnd</div><div class="ttdef"><b>Definition:</b> <a href="flash__pb_8c_source.html#l00060">flash_pb.c:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga1ce1bf42893f1d7d6c4277778a5fa76d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* g_pui8FlashPBCurrent</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="flash__pb_8c_source.html#l00076">76</a> of file <a class="el" href="flash__pb_8c_source.html">flash_pb.c</a>.</p>

<p>Referenced by <a class="el" href="flash__pb_8c_source.html#l00150">FlashPBGet()</a>, <a class="el" href="flash__pb_8c_source.html#l00410">FlashPBInit()</a>, and <a class="el" href="flash__pb_8c_source.html#l00200">FlashPBSave()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4659f8cb42d49528e15842b6f77563d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* g_pui8FlashPBEnd</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="flash__pb_8c_source.html#l00060">60</a> of file <a class="el" href="flash__pb_8c_source.html">flash_pb.c</a>.</p>

<p>Referenced by <a class="el" href="flash__pb_8c_source.html#l00410">FlashPBInit()</a>, and <a class="el" href="flash__pb_8c_source.html#l00200">FlashPBSave()</a>.</p>

</div>
</div>
<a class="anchor" id="gab42a6589f3783b6f46d545c4c243f9e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* g_pui8FlashPBStart</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="flash__pb_8c_source.html#l00050">50</a> of file <a class="el" href="flash__pb_8c_source.html">flash_pb.c</a>.</p>

<p>Referenced by <a class="el" href="flash__pb_8c_source.html#l00410">FlashPBInit()</a>, and <a class="el" href="flash__pb_8c_source.html#l00200">FlashPBSave()</a>.</p>

</div>
</div>
<a class="anchor" id="ga40ccee1f319920630fb706e12ecf6511"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t g_ui32FlashPBSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="flash__pb_8c_source.html#l00069">69</a> of file <a class="el" href="flash__pb_8c_source.html">flash_pb.c</a>.</p>

<p>Referenced by <a class="el" href="flash__pb_8c_source.html#l00410">FlashPBInit()</a>, <a class="el" href="flash__pb_8c_source.html#l00098">FlashPBIsValid()</a>, and <a class="el" href="flash__pb_8c_source.html#l00200">FlashPBSave()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Feb 14 2015 21:58:15 for EE445M RTOS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
